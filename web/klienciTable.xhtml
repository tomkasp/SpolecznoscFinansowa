<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./templates/formTemplate.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core">


    
    <ui:define name="headtitle">      
        <h:panelGroup style=" font-weight: bold; font-size: larger; display: block" styleClass="borderbeauhead vmargin bodyheadtop">Wyświetl Klientów</h:panelGroup>    
        <h:panelGroup style="display: block" styleClass="bodyheadbuttom"></h:panelGroup>
    </ui:define>

    <ui:define name="maincenter">  
        
        <h:panelGroup style=" display: block" styleClass=" borderbeau vmargintable">   
            <p:scrollPanel style="height: 70%">
                <h:form prependId="false">
                    <p:dataTable id="dataTable1" value="#{klienciMB.klientList}" var="data" paginator="true" rows="20" 
                                 rowKey="#{data.idKlienci}"  selection="#{klienciMB.selectedClient}" selectionMode="single"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="20,60,100">   
                        
                        <p:ajax event="rowSelect" update="dataTable1"/>
                        <p:ajax event="rowUnselect" update="dataTable1"/>
                        
                    <p:column filterBy="#{data.imie}" width="110"><f:facet name="header">Imie</f:facet>#{data.imie} </p:column>
                    <p:column filterBy="#{data.nazwisko}" width="110"><f:facet name="header">Nazwisko</f:facet>#{data.nazwisko} </p:column>
                    <p:column filterBy="#{data.pesel}" filterStyle="width: 75px;" style="width: 20px;"><f:facet name="header">Pesel</f:facet> #{data.pesel}</p:column>
                    <p:column width="30"><f:facet name="header">Seria Dowodu</f:facet>#{data.seriaDowodu} </p:column>
                    <p:column width="30"><f:facet name="header">Nr Dowodu</f:facet>#{data.nrDowodu} </p:column>
                    <p:column><f:facet name="header">Miejscowosc</f:facet>#{data.miejscowosc} </p:column>
                    <p:column style="width: 50px;"><f:facet name="header" >Kod pocztowy</f:facet>#{data.kodPocztowy} </p:column>
                    <p:column><f:facet name="header">Ulica</f:facet>#{data.ulica} </p:column>
                    <p:column style="width: 50px;"><f:facet name="header">Nr Domu</f:facet>#{data.nrDomu} </p:column>
                    <p:column style="width: 50px;"><f:facet name="header">Nr Mieszkania</f:facet>#{data.nrMieszkania} </p:column>
                    <p:column><f:facet name="header">Poczta</f:facet>#{data.poczta }</p:column>
                    <p:column width="60"><f:facet name="header">Klient Kredyty </f:facet>
                        
                        <h:commandButton value="Kredyty" action="#{kredytyMB.callAllKredyty(data.idKlienci)}" />
                    
                    </p:column>
                    
                     <f:facet name="footer"> 
                         
                         <c:if test="#{klienciMB.selectedClient!=null}" var="costam">
                             <h:commandButton id="viewButton" value="Edytuj" action="#{klienciMB.selectedClientRedirect()}" />
                             <h:commandButton id="viewButton2" value="Usuń" action="#{klienciMB.deleteClient()}" />
                            </c:if>
                            
                        </f:facet>  
                    
                    </p:dataTable>
                    
      
                </h:form>
            </p:scrollPanel>
        </h:panelGroup>                  
        
    </ui:define>

</ui:composition>
