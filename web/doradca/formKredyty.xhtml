<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/templates/template.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="maincenter">

        <c:if test="#{logowanieMB.zalogowany==true}" var="x">

            <h:outputText value="#{kredytyMB.partner.klienciId}"></h:outputText>

            <h:panelGroup style=" font-weight: bold; font-size: larger; display: block" styleClass="borderbeauhead vmargin bodyheadtop">Informacje o Kredycie</h:panelGroup>
            <h:panelGroup style="display: block" styleClass="bodyheadbuttom"></h:panelGroup>

            <h:form id="form1" styleClass="borderbeau2 vmargin bodyheadbuttom" style="display: block">
                <div id="formcell"  class="vmargin bodyheadbuttom" style="display: block">

                    <!--<h:panelGroup id="formcell" style="display: block" styleClass=" borderbeau2 vmargin bodyheadbuttom">-->
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodyheadtop bodytextbutton">
                        <h:outputLabel value="Nazwa Banku" styleClass="absoluteR" />
                        <h:inputText id="Nazwa" styleClass="relativeR" value="#{kredytyMB.kredyty.nazwaBanku}" required="true">
                            <f:validateLength minimum="1" maximum="30" />
                        </h:inputText>
                        <h:message for="Nazwa" style="color: red" styleClass="floatR" />
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Nr Umowy Posrednictwa" styleClass="absoluteR" /><h:inputText id="NrUmowy" styleClass="relativeR" value="#{kredytyMB.kredyty.nrUmowyPosrednictwa}" required="true"><f:validateLength minimum="1" maximum="30" /></h:inputText><h:message for="NrUmowy" style="color: red" styleClass="floatR" /></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Kwota Kredytu Brutto" styleClass="absoluteR"/><h:inputText id="KwotaKredytu" styleClass="relativeR" value="#{kredytyMB.kredyty.kwotaKredytuBrutto}" required="true"><f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/><f:validateLength minimum="1" maximum="12" />
                            <f:ajax execute="ProwizjaBankuwPro SwotwPro prowizjaBankuwPLN Ubezpieczenie KasztawPLN SwotwPLN KwotaKonsolidacji" listener="#{kredytyMB.updateAll1()}" event="keyup" render="prowizjaBankuwPLN SwotwPLN WolnaGotowka" /></h:inputText> zł<h:message for="KwotaKredytu" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Prowizja Banku w Procentach" styleClass="absoluteR"/><h:inputText id="ProwizjaBankuwPro" styleClass="relativeR" value="#{kredytyMB.test2}" required="true"><f:convertNumber integerOnly="true"/><f:validateLength minimum="1" maximum="3" />
                            <f:ajax execute="KwotaKredytu" listener="#{kredytyMB.updateAll1()}" event="keyup"   render="prowizjaBankuwPLN"/></h:inputText><h:message for="ProwizjaBankuwPro" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="prowizja Banku w PLN" styleClass="absoluteR"/><h:inputText disabled="true" id="prowizjaBankuwPLN" styleClass="relativeR" value="#{kredytyMB.give == true?'0.0':kredytyMB.test2}"  required="true"><f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/><f:validateLength minimum="1" maximum="12" /></h:inputText> zł<h:message for="prowizjaBankuwPLN" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Ubezpieczenie w PLN" styleClass="absoluteR" /><h:inputText id="Ubezpieczenie" styleClass="relativeR" value="#{kredytyMB.kredyty.ubezpieczenieWpln}" required="true"><f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/><f:validateLength minimum="1" maximum="12" /></h:inputText> zł<h:message for="Ubezpieczenie" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Kaszta w PLN" styleClass="absoluteR" /><h:inputText id="KasztawPLN" styleClass="relativeR" value="#{kredytyMB.kredyty.kosztaWpln}" required="true"><f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/><f:validateLength minimum="1" maximum="12" /></h:inputText> zł<h:message for="KasztawPLN" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Swot w Procentach" styleClass="absoluteR"/><h:inputText id="SwotwPro" styleClass="relativeR" value="#{kredytyMB.test1}" required="true"><f:validateLength minimum="1" maximum="3"/><f:convertNumber integerOnly="true"/>
                            <f:ajax execute="KwotaKredytu" listener="#{kredytyMB.updataAll2()}" event="keyup" render="SwotwPLN" /></h:inputText><h:message for="SwotwPro" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Swot w PLN" styleClass="absoluteR"/><h:inputText id="SwotwPLN" disabled="true" styleClass="relativeR" value="#{kredytyMB.give == true?'0.0':kredytyMB.test1}" required="true"><f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/><f:validateLength minimum="1" maximum="12" /></h:inputText> zł<h:message for="SwotwPLN" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Kwota Konsolidacji" styleClass="absoluteR"/><h:inputText id="KwotaKonsolidacji" styleClass="relativeR" value="#{kredytyMB.test3}" required="true"><f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/><f:validateLength minimum="1" maximum="12" />
                            <f:ajax execute="KwotaKredytu prowizjaBankuwPLN Ubezpieczenie KasztawPLN SwotwPLN" listener="#{kredytyMB.updateAll3()}" event="blur" render="WolnaGotowka" /></h:inputText> zł<h:message for="KwotaKonsolidacji" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Okres Kredytowania w Mc" styleClass="absoluteR" /><h:inputText id="OkresKredyto" styleClass="relativeR" value="#{kredytyMB.kredyty.okresKredytowaniaWmc}" required="true"><f:convertNumber integerOnly="true"/><f:validateLength  maximum="3" /></h:inputText><h:message for="OkresKredyto" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Rata w PLN" styleClass="absoluteR" /><h:inputText id="RatawPLN" styleClass="relativeR" value="#{kredytyMB.kredyty.rataWpln}" required="true"><f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/><f:validateLength minimum="1" maximum="12" /></h:inputText> zł<h:message for="RatawPLN" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Oprocentowanie w Procentach" styleClass="absoluteR"/><h:inputText id="Oprocentowanie" styleClass="relativeR" value="#{kredytyMB.kredyty.oprocentowanieWprocentach}" required="true"><f:convertNumber integerOnly="true"/><f:validateLength minimum="1" maximum="3" /></h:inputText><h:message for="Oprocentowanie" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Wolna Gotowka" styleClass="absoluteR"/><h:inputText id="WolnaGotowka" disabled="true" styleClass="relativeR" value="#{kredytyMB.give == true ? '0.0' :kredytyMB.num1}" required="true"><f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/><f:validateLength minimum="1" maximum="12" />
                        </h:inputText> zł<h:message for="WolnaGotowka" style="color: red" styleClass="floatR"/></h:panelGroup>
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Miejsce Podpisania Dokumentow" styleClass="absoluteR"/><h:inputText id="MiejscePodpisania" styleClass="relativeR" value="#{kredytyMB.kredyty.miejscePodpisaniaDokumentow}" required="true"><f:validateLength minimum="1" maximum="20" /></h:inputText><h:message for="MiejscePodpisania" style="color: red" styleClass="floatR"/></h:panelGroup>            
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton borderbuttononly"><h:outputLabel value="Data Mozliwego Uruchomentow" styleClass="absoluteR" />
                        <p:calendar styleClass="relativeR"  value="#{kredytyMB.kredyty.dataMozliwegoUruchomienia}"></p:calendar>
                    </h:panelGroup>   

                    <p class="absoluteR">



                        <h:panelGrid id="panelId" columns="2" >

                            <h:outputText value="Współkredytobiorca:"/>
                            
                            <h:selectBooleanCheckbox id="checkboxId" value="#{kredytyMB.isPartner}">
                                <p:ajax event="change" update="panelId" />
                            </h:selectBooleanCheckbox>

                            <h:outputText rendered="#{kredytyMB.isPartner}" value="Imie:"/>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="#{kredytyMB.partner.imie}"></h:outputText>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="Nazwisko:"/>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="#{kredytyMB.partner.nazwisko}"></h:outputText>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="Pesel:"/>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="#{kredytyMB.partner.pesel}"></h:outputText>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="Miejscowość:"/>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="#{kredytyMB.partner.miejscowosc}"></h:outputText>

                            <h:commandButton id="button2" rendered="#{kredytyMB.isPartner}" action="#{ kredytyMB.clearPartner() }" value="usuń"> 
                                <f:ajax listener="#{ kredytyMB.clearPartner() }" render="panelId" />
                            </h:commandButton>
                            <h:commandButton id="button1" rendered="#{kredytyMB.isPartner}" action="#{ kredytyMB.showPartnerTable() }" value="wybierz"/>  
                             

                        </h:panelGrid>

                    </p>   

                </div>
                
                <div id="putelement" class="cent">
                    
                    <h:button value="Anuluj" outcome="xxx" />
                    <h:commandButton value=" Dodaj " action="#{ kredytyMB.createKredyt() }" />
                </div>
                
            </h:form>        

        </c:if>            

    </ui:define>

</ui:composition>
