<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/templates/template.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:cc="http://java.sun.com/jsf/ezcomp"
                xmlns:g="http://java.sun.com/jsf/composite/ezcomp"
                >

    <ui:define name="maincenter">

        <c:if test="#{logowanieMB.zalogowany==true}" var="x">

            <h:panelGroup style=" font-weight: bold; font-size: larger; display: block" styleClass="borderbeauhead vmargin bodyheadtop">Informacje o Kredycie</h:panelGroup>
            <h:panelGroup style="display: block" styleClass="bodyheadbuttom"></h:panelGroup>

            <h:form id="form1" styleClass="borderbeau2 vmargin bodyheadbuttom" style="display: block">
                <div id="formcell"  class="vmargin bodyheadbuttom" style="display: block;border:1px solid black;font-variant:small-caps;">

                    <!--<h:panelGroup id="formcell" style="display: block" styleClass=" borderbeau2 vmargin bodyheadbuttom">-->
                    
                     <h:panelGroup style="display: block" styleClass="centmain bodyheadtop bodytextbutton">
                        <h:outputLabel value="Nazwa Banku" styleClass="absoluteR" />
                        <h:inputText id="Nazwa" styleClass="relativeR" value="#{kredytyMB.kredyty.nazwaBanku}" required="true">
                            <f:validateLength minimum="1" maximum="30" />
                        </h:inputText>
                        <h:message for="Nazwa" style="color: red" styleClass="floatR" />
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton"><h:outputLabel value="Nr umowy posrednictwa" styleClass="absoluteR" />
                        <h:inputText id="NrUmowy" styleClass="relativeR" value="#{kredytyMB.kredyty.nrUmowyPosrednictwa}" required="true">
                            <f:validateLength minimum="1" maximum="30" />
                        </h:inputText>
                        <h:message for="NrUmowy" style="color: red" styleClass="floatR" />
                    </h:panelGroup>
                        
                
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Kwota kredytu brutto" styleClass="absoluteR"/>
                        <h:inputText id="KwotaKredytu" styleClass="relativeR" value="#{kredytyMB.kredyty.kwotaKredytuBrutto}" required="true">
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/>
                            <f:validateLength minimum="1" maximum="12" />
                            <!--<f:ajax execute="ProwizjaBankuwPro SwotwPro prowizjaBankuwPLN Ubezpieczenie KasztawPLN SwotwPLN KwotaKonsolidacji" listener="#{kredytyMB.updateAll1()}" event="keyup" render="prowizjaBankuwPLN SwotwPLN WolnaGotowka" />-->
                            <f:ajax execute="KwotaKredytu" listener="#{kredytyMB.kalkuluj()}"  event="keyup" render="prowizjaBankuwPLN SwotwPLN WolnaGotowka" />
                        </h:inputText> 
                        zł
                        <h:message for="KwotaKredytu" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Prowizja banku w procentach" styleClass="absoluteR"/>
                        <h:inputText id="ProwizjaBankuwPro" styleClass="relativeR" value="#{kredytyMB.kredyty.prowizjaBankuWprocentach}" required="true">
                            <f:validateLength minimum="1" maximum="4"/>
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="2"/>
                            <f:ajax execute="ProwizjaBankuwPro prowizjaBankuwPLN" listener="#{kredytyMB.kalkuluj()}" event="keyup"   render="prowizjaBankuwPLN WolnaGotowka"/>
                        </h:inputText>
                        <h:message for="ProwizjaBankuwPro" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                        
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="prowizja banku w PLN" styleClass="absoluteR"/>
                        <h:inputText disabled="true" id="prowizjaBankuwPLN" styleClass="relativeR" value="#{kredytyMB.kredyty.prowizjaBankuWpln}"  required="true">
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/>
                            <f:validateLength minimum="1" maximum="12" />
                        </h:inputText> 
                        zł
                        <h:message for="prowizjaBankuwPLN" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Ubezpieczenie w PLN" styleClass="absoluteR" />
                        <h:inputText id="Ubezpieczenie" styleClass="relativeR" value="#{kredytyMB.kredyty.ubezpieczenieWpln}" required="true">
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/>
                            <f:validateLength minimum="1" maximum="12" />
                            <f:ajax execute="Ubezpieczenie" listener="#{kredytyMB.kalkuluj()}" event="keyup"   render="WolnaGotowka"/>
                        </h:inputText> 
                        zł
                        <h:message for="Ubezpieczenie" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Koszt w PLN" styleClass="absoluteR" />
                        <h:inputText id="KosztawPLN" styleClass="relativeR" value="#{kredytyMB.kredyty.kosztaWpln}" required="true">
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/>
                            <f:validateLength minimum="1" maximum="12" />
                            <f:ajax execute="@this" listener="#{kredytyMB.kalkuluj()}" event="keyup"   render="WolnaGotowka"/>
                        </h:inputText>
                        zł
                        <h:message for="KosztawPLN" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Swot w %" styleClass="absoluteR"/>
                        <h:inputText id="SwotwPro" styleClass="relativeR" value="#{kredytyMB.kredyty.swotWprocentach}" required="true">
                            <f:validateLength minimum="1" maximum="4"/>
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="2"/>
                            <f:ajax execute="SwotwPro SwotwPLN" listener="#{kredytyMB.kalkuluj()}" event="keyup" render="SwotwPLN WolnaGotowka" />
                        </h:inputText>
                        <h:message for="SwotwPro" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Swot w PLN" styleClass="absoluteR"/>
                        <h:inputText id="SwotwPLN" disabled="true" styleClass="relativeR" value="#{kredytyMB.kredyty.swotWpln}" required="true">
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/>
                            <f:validateLength minimum="1" maximum="12" />
                        </h:inputText> 
                        zł
                        <h:message for="SwotwPLN" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Kwota konsolidacji" styleClass="absoluteR"/>
                        <h:inputText id="KwotaKonsolidacji" styleClass="relativeR" value="#{kredytyMB.kredyty.kwotaKonsolidacji}" required="true">
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/>
                            <f:validateLength minimum="1" maximum="12" />
                            <f:ajax execute="KwotaKonsolidacji" listener="#{kredytyMB.kalkuluj()}" event="keyup"   render="WolnaGotowka"/>
                        </h:inputText>
                        zł
                        <h:message for="KwotaKonsolidacji" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Okres kredytowania w Mc" styleClass="absoluteR" />
                        <h:inputText id="OkresKredyto" styleClass="relativeR" value="#{kredytyMB.kredyty.okresKredytowaniaWmc}" required="true">
                            <f:convertNumber integerOnly="true"/>
                            <f:validateLength  maximum="3" />
                        </h:inputText>
                        <h:message for="OkresKredyto" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Rata w PLN" styleClass="absoluteR" />
                        <h:inputText id="RatawPLN" styleClass="relativeR" value="#{kredytyMB.kredyty.rataWpln}" required="true">
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/>
                            <f:validateLength minimum="1" maximum="12" />
                        </h:inputText>
                        zł
                        <h:message for="RatawPLN" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Oprocentowanie w %" styleClass="absoluteR"/>
                        <h:inputText id="Oprocentowanie" styleClass="relativeR" value="#{kredytyMB.kredyty.oprocentowanieWprocentach}" required="true">
                            <f:validateLength minimum="1" maximum="4"/>
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="2"/>
                        </h:inputText>
                        <h:message for="Oprocentowanie" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Wolna gotowka" styleClass="absoluteR"/>
                        <h:inputText id="WolnaGotowka" disabled="true" styleClass="relativeR" value="#{kredytyMB.kredyty.wolnaGotowka}" required="true">
                            <f:convertNumber  maxFractionDigits="2" maxIntegerDigits="10"/>
                            <f:validateLength minimum="1" maximum="12" />
                        </h:inputText>
                        zł
                        <h:message for="WolnaGotowka" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton">
                        <h:outputLabel value="Miejsce podpisania dokumentow" styleClass="absoluteR"/>
                        <h:inputText id="MiejscePodpisania" styleClass="relativeR" value="#{kredytyMB.kredyty.miejscePodpisaniaDokumentow}" required="true">
                            <f:validateLength minimum="1" maximum="20" />
                        </h:inputText>
                        <h:message for="MiejscePodpisania" style="color: red" styleClass="floatR"/>
                    </h:panelGroup>         
                    
                    <h:panelGroup style="display: block" styleClass="centmain bodytextbutton borderbuttononly">
                        <h:outputLabel value="Data możliwego uruchomienia" styleClass="absoluteR" />
                        <p:calendar styleClass="relativeR" required="true" value="#{kredytyMB.kredyty.dataMozliwegoUruchomienia}"/>
                    </h:panelGroup>   

                    <p class="absoluteR">
                        <div style="min-height:0px;">
                        <h:panelGrid id="panelId" columns="2" >
                           
                            <h:outputText value="Współkredytobiorca:"/>
                            
                            <h:selectBooleanCheckbox id="checkboxId" value="#{kredytyMB.isPartner}">
                                <p:ajax event="change" update="panelId" />
                            </h:selectBooleanCheckbox>

                            <h:outputText rendered="#{kredytyMB.isPartner}" value="Imie:"/>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="#{kredytyMB.partner.imie}"></h:outputText>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="Nazwisko:"/>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="#{kredytyMB.partner.nazwisko}"></h:outputText>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="Pesel:"/>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="#{kredytyMB.partner.pesel}"></h:outputText>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="Miejscowość:"/>
                            <h:outputText rendered="#{kredytyMB.isPartner}" value="#{kredytyMB.partner.miejscowosc}"></h:outputText>

                            <h:commandButton id="button2" rendered="#{kredytyMB.isPartner}" action="#{ kredytyMB.clearPartner() }" value="usuń"> 
                                <f:ajax listener="#{ kredytyMB.clearPartner() }" render="panelId" />
                            </h:commandButton>
                            <h:commandButton id="button1" rendered="#{kredytyMB.isPartner}" action="#{ kredytyMB.showPartnerTable() }" value="wybierz"/>  
                             
                           
                        </h:panelGrid>
                    </div>
                    </p>   

                </div>
                
                <div id="putelement" class="cent">
                    
                    <h:button value="Anuluj" outcome="xxx" />
                    <h:commandButton value=" Dodaj " action="#{ kredytyMB.createKredyt() }" />
                </div>
                
            </h:form>        

        </c:if>            

    </ui:define>

</ui:composition>
