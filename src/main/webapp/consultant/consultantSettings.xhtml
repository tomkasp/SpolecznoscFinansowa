<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>
        <ui:composition template="/templates/mainTemplate.xhtml">
            <ui:define name="title"> Doradca - ustawienia konta </ui:define> 

            <ui:define name="content">

                <h:form>
                   
                    <div class="marginT50">
                        <h3> Ustawienie konta </h3>
                    </div>

                    <div style="min-height: 420px">

                        <div class="leftThinerBox">

                            <h:outputText class="redMessage marginL20" value="Twoje dane osobowe są w stu procentach bezpieczne." /> 

                          <div class="marginLRT30">

                            <div class="field">
                                <h:outputText class="label" value="Imię"/> 
                                <h:inputText id="name" class="inputWidth" value="#{consultantSettingsMB.consultant.name}"  />
                                <h:message styleClass="invalid" for="name"/>
                            </div>

                            <div class="field">
                                <h:outputText class="label" value="Nazwisko"/>
                                <h:inputText id="lastName" class="inputWidth" value="#{consultantSettingsMB.consultant.lastName}"/> 
                                <h:message styleClass="invalid" for="lastName"/>
                            </div>
                                 
                               
                               

                                <div class="field"> 
                                    <p class="label3"> Na ten email będzie wysyłana wszelka korespondencja dotycząca twojego konta</p>                                    
                                    <h:outputText class="label" value="Adres email"/> 
                                    <h:inputText id ="email" class="inputWidth" required="true" value="#{consultantSettingsMB.consultant.user.email}" >
                                        <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" /> 
                                        <p:ajax event="keyup" update="emailMessage"/>
                                    </h:inputText>
                                    <h:message for="email" errorClass="invalid" id="emailMessage" />
                                </div>
                              
                               <div class="field">
                                <h:outputText class="label" value="Staż w branży"/> 
                                <h:inputText id="expirience" class="inputWidth" value="#{consultantSettingsMB.consultant.expirience}"/>
                                <h:message styleClass="invalid" for="expirience"/>
                               </div>

                               <div class="field"> 
                                <h:outputText class="label" value="Miejsce zatrudnienia"/>
                                <p:selectOneMenu id="workingPlace" style="width: 35%;" styleClass="inputWidth" value="#{consultantSettingsMB.idWorkingPlace}">
                                    <f:selectItems value="#{dictionaryMB.workingPlace}" var="w" itemLabel="#{w.name}" itemValue="#{w.idWorkingPlace}" />
                                </p:selectOneMenu> 
                                <h:message styleClass="invalid" for="workingPlace"/>
                              </div>

                          </div>
                            

                        </div>

                        <div style="display: none;" class="rightWiderBox">
                            <h4 style="margin: 0;">USTAW ZDJECIE</h4>
                            
                            <h:graphicImage class="photoChange" id="profil_logo_blue_small" alt="could not be found."  value="/resources/images/profile_blue.png" title="Profil Blue" ></h:graphicImage>

                            <h:outputText class="fontGrey photoChangeText" value="Twoje zdjęcie musi być zapisane jako plik graficzny (JPG, JPEG, GIF, PNG), a rozmiar nie może przekroczyć 5MB." ></h:outputText>

                            <h:inputText  class="label2 browseInput"  value="przeglądaj..." />
                            
                            <h:link class="floatR greyButton wideButton" value="Wczytaj" />

                            <h:link class="wideButton redX browseButton" value="Usuń zdjęcie" />

                        </div>
                        
                       

                    </div>
                    <div>
                        <h3 style="margin:0"> Dane kredytowe </h3>
                    </div>

                    <div>

                        <h4>Z KTÓRYMI BANKAMI WSPÓŁPRACUJESZ?</h4>  

                        <p:selectManyCheckbox styleClass="fontGrey" style="display:inline;" value="#{consultantSettingsMB.idSelectedBankList}" layout="pageDirection" >  

                            <f:selectItems value="#{ dictionaryMB.bank }" var="w" itemLabel="#{w.name}" itemValue="#{w.idInstitution}"/>

                        </p:selectManyCheckbox>  

                    </div>

                    <div>

                        <h4>Z KTÓRYMI INSTYTUCJAMI POZABANKOWYMI WSPÓŁPRACUJESZ?</h4> 

                        <p:selectManyCheckbox styleClass="fontGrey" style="display:inline-table" value="#{consultantSettingsMB.idSelectedInstitutionList}" layout="pageDirection">
                            <f:selectItems value="#{ dictionaryMB.institution }" var="w" itemLabel="#{w.name}" itemValue="#{w.idInstitution}"/>
                        </p:selectManyCheckbox>

                    </div>
                    <div>
                        <h4>JAKIE KREDYTY PREFERUJESZ?</h4>
                        <p:selectManyCheckbox styleClass="fontGrey" style="display:inline-table" value="#{consultantSettingsMB.idProductTypes}" layout="pageDirection">
                            <f:selectItems value="#{ dictionaryMB.productType}" var="p" itemLabel="#{p.name}" itemValue="#{p.idProductType}"/>
                        </p:selectManyCheckbox>
                    </div>    
                    <div>
                        <h4> ZASIĘG/MOBILNOŚĆ </h4>

                        <div>  
                            <p:selectOneMenu style="width: 32%;" styleClass="marginLRT30" value="#{consultantSettingsMB.idRegion}">
                                <f:selectItems value="#{dictionaryMB.region}" var="w" itemLabel="#{w.region}" itemValue="#{w.idRegion}" />
                            </p:selectOneMenu> 
                        </div>

                        <div> 
                            <p:selectBooleanCheckbox styleClass="marginLRT30" />
                            <h:outputText styleClass="fontGrey"  value="ogranicz wyniki do mojego województwa" />
                        </div>

                    </div>  
                    <div class="adressSection"> <h4> DANE ADRESOWE </h4> </div>
                    <div class="invoiceSection"> <h4> DANE DO FAKTURY </h4> </div>

                    <div class="adressSection">

                        <div class="field"> 
                            <h:outputText class="label" value="Województwo"/>  
                            <p:selectOneMenu style="width: 39%;" value="#{consultantSettingsMB.idMainRegion}">  
                                <f:selectItems value="#{dictionaryMB.region}" var="woj" itemLabel="#{woj.region}" itemValue="#{woj.idRegion}"/>
                            </p:selectOneMenu> 
                        </div>

                        <div class="field">
                            <h:outputText class="label" value="Miasto"/>
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.mainAddress.city}"/> 
                        </div>

                        <div class="field">
                            <h:outputText class="label" value="Kod pocztowy"/>
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.mainAddress.zipCode}"/> 
                        </div>

                        <div class="field"> 
                            <h:outputText class="label" value="Telefon"/> 
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.mainAddress.phone}" />
                        </div>

                        <div class="field"> 
                            <h:outputText class="label" value="Ulica"/>  
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.mainAddress.street}"/>
                        </div>

                        <div class="field">
                            <h:outputText class="label" value="Numer"/> 
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.mainAddress.houseNumber}"/> 
                        </div>

                        <div> 
                            <p:selectBooleanCheckbox styleClass="marginLRT30" />
                            <h:outputText styleClass="fontGrey"  value="chcę otrzymywać fakturę VAT" /> 
                        </div>

                    </div>


                    <div class="invoiceSection invoiceSectionContent">

                        <div class="field"> 
                            <h:outputText class="label" value="Nazwa"/> 
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.invoiceData.name}"/>
                        </div>

                        <div class="field"> 
                            <h:outputText class="label" value="Województwo"/> 
                            <p:selectOneMenu style="width: 39% " value="#{consultantSettingsMB.idInvoiceRegion}" >  
                                <f:selectItems value="#{dictionaryMB.region}" var="woj" itemLabel="#{woj.region}" itemValue="#{woj.idRegion}"/>
                            </p:selectOneMenu>
                        </div>

                        <div class="field">
                            <h:outputText class="label" value="Miasto"/>
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.invoiceAddress.city}"/> 
                        </div>

                        <div class="field"> 
                            <h:outputText class="label" value="Kod pocztowy"/>  
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.invoiceAddress.zipCode}"/> 
                        </div>

                        <div class="field">
                            <h:outputText class="label" value="Telefon"/>
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.invoiceAddress.phone}"/> 
                        </div>

                        <div class="field"> 
                            <h:outputText class="label" value="Ulica"/> 
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.invoiceAddress.street}"/>  
                        </div>

                        <div class="field"> 
                            <h:outputText class="label" value="Numer"/> 
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.invoiceAddress.houseNumber}"/> 
                        </div>

                        <div class="field"> 
                            <h:outputText class="label" value="NIP"/> 
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.invoiceData.nip}"/> 
                        </div>

                        <div class="field"> 
                            <h:outputText class="label" value="REGON"/>  
                            <h:inputText class="inputWidth3" value="#{consultantSettingsMB.invoiceData.regon}"/> 
                        </div>
                    </div>

                    <div style="min-height: 40px; margin-bottom: 30px;"> 
                        <h:commandLink class ="blueButton wideButton floatR marginTB20" value="Zapisz zmiany" action="#{consultantSettingsMB.updateSettings()}"/>                       
                    </div>
                    
                </h:form>   
                
                <div class="leftInlineBox">
                
                 <h:form> 
                            
                            <div class="marginLRT30">

                                <h4 class="greenLeftBorder">ZMIANA HASŁA</h4>
                                
                                <div class="field">
                                    <h:outputText class="label" value="Obecne hasło"/>  
                                    <h:inputSecret required="true" id="cPassword"  value="#{consultantSettingsMB.currentPassword}" validator="#{consultantSettingsMB.validateCurrentPassword}"> 
                                    <f:validateLength minimum="8" maximum="20" />
                                    <p:ajax event="keyup" update="currentPasswordMessage"/>
                                    </h:inputSecret>
                                    <h:message for="cPassword" errorClass="invalid" id="currentPasswordMessage" />
                                </div>
                                
                                <div class="field">
                                    <h:outputText class="label" value="Nowe hasło"/> 
                                    <h:inputSecret required="true" value="#{consultantSettingsMB.newPassword}" >
                                    <f:validateLength minimum="8" maximum="20" />
                                    <p:ajax event="keyup" update="confirmPasswordMessage" />
                                    </h:inputSecret>
                                </div>
                                
                                <div class="field">
                                    <h:outputText class="label" value="Powtórz hasło"/> 
                                    <h:inputSecret id="confirmPassword" required="true" value="#{consultantSettingsMB.confirmNewPassword}" validator="#{consultantSettingsMB.validateSamePassword}" > 
                                    <f:validateLength minimum="8" maximum="20" />
                                    <p:ajax event="keyup" update="confirmPasswordMessage"/>
                                    </h:inputSecret>
                                    <h:message for="confirmPassword" errorClass="invalid" id="confirmPasswordMessage" />
                                </div>
                                
                                <div style="min-height: 40px"> 
                                    <h:commandLink class="floatR greyButton wideButton" type="submit" value="Zmień" action="#{consultantSettingsMB.updatePassword()}"/>
                                </div>

                            </div>

                </h:form>
                    
              </div>

            </ui:define>
            
        </ui:composition>
    </body>
</html>