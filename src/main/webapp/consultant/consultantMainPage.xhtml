<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core" >

    <body>
        <ui:composition template="/templates/mainTemplate.xhtml">
            <ui:define name="title"> Doradca - ekran główny </ui:define> 

            <ui:define name="content">
                <f:event type="preRenderView" listener="#{marketMB.reload()}" />
                <h:panelGroup rendered="#{!(empty marketMB.premiumList) or !(empty messagesMB.unreadMessagesList) }" >
                    <h:form> 
                        <div style="min-height: 80px; border-bottom: #0793F0 4px solid">
                            <h:graphicImage id="red_envelope" class="floatL" style="margin-left: 10px; margin-top:10px" alt="could not be found."  value="/resources/images/mail_red.png" title="RedEnvelope" ></h:graphicImage>
                            <h:outputText class="redMessage floatL marginLRT30" value="Uwaga! Masz nieprzeczytane wiadomości. Ilość: #{marketMB.premiumList.size() + messagesMB.unreadMessagesList.size()}" /> 

                            <h:commandButton  class="floatR greyButton wideButton marginT50" value="Obczaj" action="#{messagesMB.toViewMessages()}" />  
                        </div>
                    </h:form>
                </h:panelGroup>

                <h:form>

                    <div>

                        <h4> OSTATNIA AKTYWNOŚĆ NA GIEŁDZIE </h4>


                        <p:dataTable id="lastCases" value="#{marketMB.clientCaseList}" rowKey="#{row}" rowIndexVar="rowNumber"  var="row" emptyMessage="Nie ma żadnych spraw" selection="#{marketMB.selectedLastCase}" selectionMode="single" >

                            <p:ajax event="rowSelect" update="@form" listener="#{marketMB.rowClick(marketMB.selectedLastCase)}"/> 
                            <p:ajax event="rowDblselect" update="@form" listener="#{marketMB.rowDoubleClick()}"/>

                            <p:column headerText="Numer sprawy">  
                                <h:outputText  value="#{row.idClientCase}"/>
                            </p:column>  

                            <p:column headerText="Data dodania">    
                                <h:outputText  value="#{row.beginDate}">
                                    <f:convertDateTime pattern="dd-MM-yy" timeZone="GMT+3"/>
                                </h:outputText>  
                            </p:column>  

                            <p:column headerText="Numer klienta"> 
                                <h:outputText  value="#{row.client.idClient}"/>
                            </p:column>

                            <p:column headerText="Postęp">  
                                <h:outputText  value="#{row.phase}"/>
                            </p:column> 

                            <p:column headerText="Rodzaj kredytu"  >
                                <h:outputText  value="#{row.productType.name}"/>
                            </p:column> 

                            <p:column headerText="BIK">  
                                <h:outputText  value="#{marketMB.showBIK(row.client) ? 'TAK' : 'NIE' }"/>                         
                            </p:column> 

                            <p:column headerText="Kod pocztowy">  
                                <h:outputText  value="#{row.client.addresses.toArray()[0].zipCode}"/>
                            </p:column>

                            <p:column headerText="Wiek">  
                                <h:outputText  value="#{marketMB.converters.ageFromBirthDate(row.client.birthDate)}"/>
                            </p:column>

                            <p:column headerText="Typ zatrudnienia">
                                <h:outputText rendered="#{marketMB.modelsEmploymentType.get(rowNumber).size() == 1}" value="#{marketMB.modelsEmploymentType.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.modelsEmploymentType.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.modelsEmploymentType.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Branża">  
                                <h:outputText rendered="#{marketMB.modelsBranch.get(rowNumber).size() == 1}" value="#{marketMB.modelsBranch.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.modelsBranch.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.modelsBranch.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Trudność kredytu"> 
                                <h:outputText  value="#{row.difficulty}"/>
                            </p:column>

                            <p:column headerText="Ilość doradców"> 
                                <h:outputText value="#{marketMB.countConsultantApplications(row)}" />
                            </p:column>

                            <p:column headerText="Koniec aukcji"> 
                                <h:outputText  value="#{marketMB.converters.hoursLeft(row.endDate)}"/>        
                            </p:column> 

                            <!--  <p:column headerText=""> 
                                <h:outputText  value=" "/>
                            </p:column> -->



                        </p:dataTable>

                        <p:poll interval="120" listener="#{marketMB.pollData()}" update="@form" /> 

                    </div>

                    <p:commandButton disabled="#{empty marketMB.selectedLastCase}" styleClass="topMenuButton greyButton wideButton" value="Zgłoś się!" action="#{marketMB.applyToCase(marketMB.selectedLastCase)}" oncomplete="confirmed.show();" >
                        <p:ajax update="applied lastCases traced" />
                    </p:commandButton>
                    <p:commandButton disabled="#{empty marketMB.selectedLastCase}" styleClass="topMenuButton greyButton wideButton" value="Obserwuj" action="#{marketMB.traceCase(marketMB.selectedLastCase)}" oncomplete="confirmedObserved.show();">
                        <p:ajax update="applied lastCases traced" />
                    </p:commandButton>
                    <p:commandButton styleClass="topMenuButton greyButton wideButton" value="Pokaż wszystkie" action="#{marketMB.toMarket()}"/>


                    <div class="marginT50">

                        <h4>ZGŁOSZENIA</h4>

                        <p:dataTable id="applied" value="#{marketMB.castClientCaseSetToArray(loginMB.consultant.clientCases)}" rowKey="#{row}" rowIndexVar="rowNumber"  var="row" emptyMessage="Nie ma żadnych spraw" selection="#{marketMB.selectedAppliedCase}" selectionMode="single" >

                            <p:ajax event="rowSelect" update="@form" listener="#{marketMB.rowClick(marketMB.selectedAppliedCase)}"/> 
                            <p:ajax event="rowDblselect" update="@form" listener="#{marketMB.rowDoubleClick()}"/>

                            <p:column headerText="Numer sprawy">  
                                <h:outputText  value="#{row.idClientCase}"/>
                            </p:column>  

                            <p:column headerText="Data dodania">    
                                <h:outputText  value="#{row.beginDate}">
                                    <f:convertDateTime pattern="dd-MM-yy" timeZone="GMT+3"/>
                                </h:outputText>  
                            </p:column>  

                            <p:column headerText="Numer klienta"> 
                                <h:outputText  value="#{row.client.idClient}"/>
                            </p:column>

                            <p:column headerText="Postęp">  
                                <h:outputText  value="#{row.phase}"/>
                            </p:column> 

                            <p:column headerText="Rodzaj kredytu"  >
                                <h:outputText  value="#{row.productType.name}"/>
                            </p:column> 

                            <p:column headerText="BIK">  
                                <h:outputText  value="#{marketMB.showBIK(row.client) ? 'TAK' : 'NIE' }"/>                         
                            </p:column> 

                            <p:column headerText="Kod pocztowy">  
                                <h:outputText  value="#{row.client.addresses.toArray()[0].zipCode}"/>
                            </p:column>

                            <p:column headerText="Wiek">  
                                <h:outputText  value="#{marketMB.converters.ageFromBirthDate(row.client.birthDate)}"/>
                            </p:column>

                            <p:column headerText="Typ zatrudnienia">
                                <h:outputText rendered="#{marketMB.appliedModelsEmploymentType.get(rowNumber).size() == 1}" value="#{marketMB.appliedModelsEmploymentType.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.appliedModelsEmploymentType.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.appliedModelsEmploymentType.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Branża">  
                                <h:outputText rendered="#{marketMB.appliedModelsBranch.get(rowNumber).size() == 1}" value="#{marketMB.appliedModelsBranch.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.appliedModelsBranch.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.appliedModelsBranch.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Trudność kredytu"> 
                                <h:outputText  value="#{row.difficulty}"/>
                            </p:column>

                            <p:column headerText="Ilość doradców"> 
                                <h:outputText value="#{marketMB.countConsultantApplications(row)}" />
                            </p:column>

                            <p:column headerText="Koniec aukcji"> 
                                <h:outputText  value="#{marketMB.converters.hoursLeft(row.endDate)}"/>        
                            </p:column> 
                        </p:dataTable>
                    </div>

                    <p:commandButton id="deleteApplied" disabled="#{empty marketMB.selectedAppliedCase}" styleClass="topMenuButton redX wideButton" value="Usuń" onclick="revokeApp.show();" >
                        <f:ajax execute="applied" render="applied" />
                    </p:commandButton>

                    <div class="marginT50">

                        <h4> MOJE PROWADZONE SPRAWY </h4>

                        <p:dataTable id="owned" value="#{marketMB.ownedList}" rowKey="#{row}" rowIndexVar="rowNumber"  var="row" emptyMessage="Nie ma żadnych spraw" selection="#{marketMB.selectedOwnedCase}" selectionMode="single" >

                            <p:ajax event="rowSelect" update="@form" listener="#{marketMB.rowClick(marketMB.selectedOwnedCase)}"/> 
                            <p:ajax event="rowDblselect" update="@form" listener="#{marketMB.rowDoubleClick()}"/>


                            <p:column headerText="Numer sprawy">
                                <h:outputText  value="#{row.idClientCase}"/>
                            </p:column>  

                            <p:column headerText="Data dodania">    
                                <h:outputText  value="#{row.beginDate}">
                                    <f:convertDateTime pattern="dd-MM-yy" timeZone="GMT+3"/>
                                </h:outputText>
                            </p:column>  

                            <p:column headerText="Numer klienta">  
                                <h:outputText  value="#{row.client.idClient}"/>
                            </p:column> 

                            <p:column headerText="Postęp">  
                                <h:outputText  value="#{row.phase}"/>
                            </p:column> 

                            <p:column headerText="Rodzaj kredytu"  >
                                <h:outputText  value="#{row.productType.name}"/>
                            </p:column> 

                            <p:column headerText="BIK">  
                                <h:outputText  value="#{marketMB.showBIK(row.client) ? 'TAK' : 'NIE' }"/>
                            </p:column> 

                            <p:column headerText="Kod pocztowy">  
                                <h:outputText  value="#{row.client.addresses.toArray()[0].zipCode}"/>
                            </p:column>

                            <p:column headerText="Wiek">  
                                <h:outputText  value="#{marketMB.converters.ageFromBirthDate(row.client.birthDate)}"/>
                            </p:column>

                            <p:column headerText="Typ zatrudnienia">
                                <h:outputText rendered="#{marketMB.ownedModelsEmploymentType.get(rowNumber).size() == 1}" value="#{marketMB.ownedModelsEmploymentType.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.ownedModelsEmploymentType.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.ownedModelsEmploymentType.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Branża">  
                                <h:outputText rendered="#{marketMB.ownedModelsBranch.get(rowNumber).size() == 1}" value="#{marketMB.ownedModelsBranch.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.ownedModelsBranch.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.ownedModelsBranch.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Trudność kredytu"> 
                                <h:outputText  value="#{row.difficulty}"/>
                            </p:column>


                            <p:column headerText="Status">  
                                <h:outputText value="#{row.caseStatus.name}" />
                            </p:column>  

                        </p:dataTable>
                    </div>

                    <div class="marginT50">

                        <h4> ZAKOŃCZONE SPRAWY </h4>

                        <p:dataTable id="finished" value="#{marketMB.finishedList}" rowKey="#{row}" rowIndexVar="rowNumber"  var="row" emptyMessage="Nie ma żadnych spraw" selection="#{marketMB.selectedFinishedCase}" selectionMode="single" >

                            <p:ajax event="rowSelect" update="@form" listener="#{marketMB.rowClick(marketMB.selectedFinishedCase)}"/> 
                            <p:ajax event="rowDblselect" update="@form" listener="#{marketMB.rowDoubleClick()}"/>


                            <p:column headerText="Numer sprawy">
                                <h:outputText  value="#{row.idClientCase}"/>
                            </p:column>  

                            <p:column headerText="Data dodania">    
                                <h:outputText  value="#{row.beginDate}">
                                    <f:convertDateTime pattern="dd-MM-yy" timeZone="GMT+3"/>
                                </h:outputText>
                            </p:column>  

                            <p:column headerText="Numer klienta">  
                                <h:outputText  value="#{row.client.idClient}"/>
                            </p:column> 

                            <p:column headerText="Postęp">  
                                <h:outputText  value="#{row.phase}"/>
                            </p:column> 

                            <p:column headerText="Rodzaj kredytu"  >
                                <h:outputText  value="#{row.productType.name}"/>
                            </p:column> 

                            <p:column headerText="BIK">  
                                <h:outputText  value="#{marketMB.showBIK(row.client) ? 'TAK' : 'NIE' }"/>
                            </p:column> 

                            <p:column headerText="Kod pocztowy">  
                                <h:outputText  value="#{row.client.addresses.toArray()[0].zipCode}"/>
                            </p:column>

                            <p:column headerText="Wiek">  
                                <h:outputText  value="#{marketMB.converters.ageFromBirthDate(row.client.birthDate)}"/>
                            </p:column>

                            <p:column headerText="Typ zatrudnienia">
                                <h:outputText rendered="#{marketMB.finishedModelsEmploymentType.get(rowNumber).size() == 1}" value="#{marketMB.finishedModelsEmploymentType.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.finishedModelsEmploymentType.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.finishedModelsEmploymentType.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Branża">  
                                <h:outputText rendered="#{marketMB.finishedModelsBranch.get(rowNumber).size() == 1}" value="#{marketMB.finishedModelsBranch.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.finishedModelsBranch.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.finishedModelsBranch.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Trudność kredytu"> 
                                <h:outputText  value="#{row.difficulty}"/>
                            </p:column>

                            <p:column headerText="Ocena"> 
                                <h:outputText rendered="#{row.caseRating eq null}" value="Poproś o ocenę"/>
                                <h:outputText rendered="#{!(row.caseRating eq null)}" value="#{row.caseRating.average}" />
                            </p:column>

                        </p:dataTable>
                    </div>

                    <h:link class="topMenuButton greyButton wideButton" value="Generuj raport" outcome="/index"/>

                    <div class="marginT50">

                        <h4>OBSERWOWANE</h4>

                        <p:dataTable id="traced" value="#{marketMB.castClientCaseSetToArray(loginMB.consultant.clientCases_2)}" rowKey="#{row}" rowIndexVar="rowNumber"  var="row" emptyMessage="Nie ma żadnych spraw" selection="#{marketMB.selectedObservedCase}" selectionMode="single" >

                            <p:ajax event="rowSelect" update="@form" listener="#{marketMB.rowClick(marketMB.selectedObservedCase)}"/> 
                            <p:ajax event="rowDblselect" update="@form" listener="#{marketMB.rowDoubleClick()}"/>

                            <p:column headerText="Numer sprawy">  
                                <h:outputText  value="#{row.idClientCase}"/>
                            </p:column>  

                            <p:column headerText="Data dodania">    
                                <h:outputText  value="#{row.beginDate}">
                                    <f:convertDateTime pattern="dd-MM-yy" timeZone="GMT+3"/>
                                </h:outputText>  
                            </p:column>  

                            <p:column headerText="Numer klienta"> 
                                <h:outputText  value="#{row.client.idClient}"/>
                            </p:column>

                            <p:column headerText="Postęp">  
                                <h:outputText  value="#{row.phase}"/>
                            </p:column> 

                            <p:column headerText="Rodzaj kredytu"  >
                                <h:outputText  value="#{row.productType.name}"/>
                            </p:column> 

                            <p:column headerText="BIK">  
                                <h:outputText  value="#{marketMB.showBIK(row.client) ? 'TAK' : 'NIE' }"/>                         
                            </p:column> 

                            <p:column headerText="Kod pocztowy">  
                                <h:outputText  value="#{row.client.addresses.toArray()[0].zipCode}"/>
                            </p:column>

                            <p:column headerText="Wiek">  
                                <h:outputText  value="#{marketMB.converters.ageFromBirthDate(row.client.birthDate)}"/>
                            </p:column>

                            <p:column headerText="Typ zatrudnienia">
                                <h:outputText rendered="#{marketMB.observedModelsEmploymentType.get(rowNumber).size() == 1}" value="#{marketMB.observedModelsEmploymentType.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.observedModelsEmploymentType.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.observedModelsEmploymentType.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Branża">  
                                <h:outputText rendered="#{marketMB.observedModelsBranch.get(rowNumber).size() == 1}" value="#{marketMB.observedModelsBranch.get(rowNumber).toArray()[0]}"/>
                                <h:selectOneMenu rendered="#{marketMB.observedModelsBranch.get(rowNumber).size() > 1}" value=" ">
                                    <f:selectItems value="#{marketMB.observedModelsBranch.get(rowNumber)}" />
                                </h:selectOneMenu>
                            </p:column>

                            <p:column headerText="Trudność kredytu"> 
                                <h:outputText  value="#{row.difficulty}"/>
                            </p:column>

                            <p:column headerText="Ilość doradców"> 
                                <h:outputText value="#{marketMB.countConsultantApplications(row)}" />
                            </p:column>

                            <p:column headerText="Koniec aukcji"> 
                                <h:outputText  value="#{marketMB.converters.hoursLeft(row.endDate)}"/>        
                            </p:column> 
                        </p:dataTable>
                    </div>

                    <p:commandButton  disabled="#{empty marketMB.selectedObservedCase}" styleClass="topMenuButton greyButton wideButton" value="Akceptuj" action="#{marketMB.applyToCase(marketMB.selectedObservedCase)}" oncomplete="confirmed.show();">
                        <p:ajax update="applied lastCases traced" />
                    </p:commandButton>
                    <p:commandButton id="deleteObservedButton" disabled="#{empty marketMB.selectedObservedCase}" styleClass="topMenuButton redX wideButton" value="Usuń" oncomplete="revokeObs.show();" >

                    </p:commandButton>

                    <div class="marginT50 marginB30">
                        <h4> PODSUMOWANIE RANKINGU </h4>

                        <p:dataTable var="row" value="#{consultantRatesMB.scoreBoard}">

                            <p:column headerText="">  
                                <h:outputText  value="#{row.title}"/>
                            </p:column>  

                            <p:column headerText="Twój wynik"> 
                                <h:outputText  value="#{row.score}">
                                    <f:convertNumber locale="en" pattern="#0.00" />
                                </h:outputText>
                            </p:column>  

                            <p:column headerText="Średnia wszystkich doradców">  
                                <h:outputText  value="#{row.average_score}">
                                    <f:convertNumber locale="en" pattern="#0.00" />
                                </h:outputText>
                            </p:column>  

                            <p:column headerText="Najlepszy wynik">  
                                <h:outputText  value="#{row.max_score}"/>
                            </p:column>  

                            <p:column headerText="Najgorszy wynik">  
                                <h:outputText  value="#{row.min_score}"/>
                            </p:column> 

                        </p:dataTable>
                        <p:commandLink styleClass="wideButton greyButton floatR" value="Moje oceny" action="#{consultantRatesMB.showConsulantRatesPage()}"/>
                        <p:commandLink styleClass="wideButton greyButton floatR" value="Najlepsi doradcy" action="#{scoreBoardMB.showScoreBoard()}"/>
                    </div>

                    <!-- DIALOGS -->

                    <p:dialog id="confirmDialog" dynamic="true" closable="false" style="box-shadow: 0px 0px 0px rgba(0, 0, 0, 0); overflow: hidden; border-radius: 0px;" header="Informacja"  widgetVar="confirmed" resizable="false" height="80" width="440" showEffect="clip" hideEffect="explode" modal="true" >  
                        <h:panelGroup rendered="#{!marketMB.alreadyApplied}" class="fontGrey">
                            Twoje zgłoszenie do sprawy zostało zatwierdzone.
                        </h:panelGroup>

                        <h:panelGroup rendered="#{marketMB.alreadyApplied}" class="fontGrey">
                            Do tego zlecenia zgłosiłeś się już wcześniej. 
                        </h:panelGroup>

                        <div> 
                            <h:commandButton styleClass="floatR wideButton" style="margin-top:30px;" type="button" value="Kontynuuj" onclick="confirmed.hide()"  >
                                <p:ajax update="applied"/>
                            </h:commandButton>
                        </div>
                    </p:dialog>

                    <p:dialog id="confirmObserved" dynamic="true" closable="false" style="box-shadow: 0px 0px 0px rgba(0, 0, 0, 0); overflow: hidden; border-radius: 0px;" header="Informacja"  widgetVar="confirmedObserved" resizable="false" height="80" width="440" showEffect="clip" hideEffect="explode" modal="true" >  
                        <h:panelGroup rendered="#{!marketMB.alreadyObserved}" class="fontGrey">
                            Od teraz śledzisz sprawę numer:  #{marketMB.selectedLastCase.idClientCase}.
                        </h:panelGroup>

                        <h:panelGroup rendered="#{marketMB.alreadyObserved}" class="fontGrey">
                            Już obserwujesz tą sprawę! 
                        </h:panelGroup>

                        <div> 
                            <h:commandButton styleClass="floatR wideButton" style="margin-top:30px;" type="button" value="Kontynuuj" onclick="confirmedObserved.hide()"  >
                                <p:ajax update="traced"/>
                            </h:commandButton>
                        </div>
                    </p:dialog>

                    <p:dialog id="revokeApplication" dynamic="true" closable="false" style="box-shadow: 0px 0px 0px rgba(0, 0, 0, 0); overflow: hidden; border-radius: 0px;" header="Czy napewno?"  widgetVar="revokeApp" resizable="false" height="80" width="440" showEffect="clip" hideEffect="explode" modal="true" >   
                        <h:panelGroup class="fontGrey">
                            Czy napewno chcesz usunąć element z listy?
                        </h:panelGroup>

                        <div> 
                            <h:commandButton styleClass="floatR wideButton" style="margin-top:30px;" type="button" value="Tak" action="#{marketMB.revokeApplication(marketMB.selectedAppliedCase)}" onclick="revokeApp.hide()" >
                                <p:ajax update="applied deleteApplied"/>
                            </h:commandButton>

                            <h:commandButton styleClass="floatL wideButton" style="margin-top:30px;" type="button" value="Nie" onclick="revokeApp.hide()"  >
                                <p:ajax update="applied"/>
                            </h:commandButton>
                        </div>
                    </p:dialog>

                    <p:dialog id="revokeObserved" dynamic="true" closable="false" style="box-shadow: 0px 0px 0px rgba(0, 0, 0, 0); overflow: hidden; border-radius: 0px;" header="Czy napewno?"  widgetVar="revokeObs" resizable="false" height="80" width="440" showEffect="clip" hideEffect="explode" modal="true" >   
                        <h:panelGroup class="fontGrey">
                            Czy napewno chcesz usunąć element z listy?
                        </h:panelGroup>

                        <div> 
                            <h:commandButton styleClass="floatR wideButton" style="margin-top:30px;" type="button" value="Tak" action="#{marketMB.stopObserve(marketMB.selectedObservedCase)}" onclick="revokeObs.hide()" >
                                <p:ajax update="traced deleteObservedButton"/>
                            </h:commandButton>

                            <h:commandButton styleClass="floatL wideButton" style="margin-top:30px;" type="button" value="Nie" onclick="revokeObs.hide()"  >
                                <p:ajax update="traced"/>
                            </h:commandButton>
                        </div>
                    </p:dialog>




                </h:form>

            </ui:define>           
        </ui:composition>
    </body>
</html>
