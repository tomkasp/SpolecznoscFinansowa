<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:comp="http://java.sun.com/jsf/composite/components">

    <body>

        <ui:composition template="/templates/mainTemplate.xhtml">
            <ui:define name="title"> Doradca - komentarze </ui:define> 


            <ui:define name="content">
                <h:panelGroup rendered="#{loginMB.returnConsultantAccessRights() == settings.free}" >
                    <comp:buySubscriptionDialog returnOnCancel="true" visibility="true" widgetName="subsDialog"  />
                </h:panelGroup>

                <h:panelGroup rendered="#{!(loginMB.returnConsultantAccessRights() == settings.free)}" >
                <div class="leftTable">
                    
                    <h3>Lista otrzymanych komentarzy</h3>
                    <h:form id="myRates"> 
                        <p:dataTable value="#{consultantRatesMB.consulantRates}" rowKey="#{row.idClientCase}" rowIndexVar="rowNumber"  var="row" emptyMessage="Nie masz żadnych komentarzy" selection="#{consultantRatesMB.clientCase}" selectionMode="single">

                        <p:ajax event="rowSelect" listener="#{consultantRatesMB.onRowSelect()}"/>
                        
                        <p:column headerText="Od Kogo">  
                            <h:outputText  value="#{row.client.lastName}"/>
                        </p:column>  

                        <p:column headerText="Typ">    
                        </p:column>  

                        <p:column headerText="Śr.ocena"> 
                            <h:outputText  value="#{row.caseRating.average}"/>
                        </p:column>  

                        <p:column headerText="Data">  
                            <h:outputText  value="#{row.caseRating.commentDate}"/>
                        </p:column> 

                        <p:column headerText="Nr. Transakcji" >
                            <h:outputText  value="#{row.idClientCase}"/>
                        </p:column> 

                    </p:dataTable>
                    </h:form> 
                </div>

                <div style="clear:both;">
                    
                </div>
                </h:panelGroup>
            </ui:define>           
        </ui:composition>
    </body>
</html>