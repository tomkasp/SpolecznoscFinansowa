<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">



    <body>

        <ui:composition template="/templates/mainTemplate.xhtml">
            <ui:define name="title"> Klient - uzupełnij dane </ui:define> 
            <ui:define name="top"> 
                <h:outputStylesheet library="css" name="green.css" />

                <div class="topbarLogo">
                    <h:graphicImage id="sf_logo" alt="could not be found."  value="/resources/images/spolecznosc_logo2.png" title="SF Logo" ></h:graphicImage>
                    <h:link outcome="/client/clientMainPage"> <h:graphicImage class="bigMenuButton" id="green_home_icon" alt="could not be found."  value="/resources/images/home_green.png" title="Home" ></h:graphicImage> </h:link>
                    <h:link outcome="/client/clientSettings"> <h:graphicImage class="bigMenuButton" id="profile_icon" alt="could not be found."  value="/resources/images/profile_logo_black.png" title="Profile" ></h:graphicImage> </h:link>
                </div>

                <div class="topbarMenuGreen">
                    <h:panelGroup>
                        <h:link class="topMenuButton greyButton wideButton" value="Wyloguj" outcome="/index"/>
                    </h:panelGroup>
                </div>
            </ui:define>

            <ui:define name="content">
                <div id="profileBar" class="profilBar">
                    <h:graphicImage class="profilLogo" id="profil_logo_green" alt="could not be found."  value="/resources/images/profil_green.png" title="Profile Green" ></h:graphicImage>

                    <div id="spaceFiller" > </div>
                    <div>     
                        <h5 class="greenRightBorder"> #{loginMB.client.name} &nbsp; #{loginMB.client.lastName} </h5> 
                        <h:outputText class="profileText" value="nr. klienta:" />
                        <h5 class="greenRightBorder"> #{loginMB.user.login} </h5>
                        <h:outputText class="profileText" value="Stan konta:" />
                        <h5 class="greenRightBorder"> #{loginMB.client.points} /5 pkt. </h5>
                    </div>
                </div>
                <h:form id="generalForm">
                    
                <div style="min-height: 850px">
                    <div class="leftThinerBox">
                        <h3 class="greenLeftBorder"> Uzupelnij swoje dane </h3>
                        <h:outputText  class="redMessage marginL20" value="Te dane są wymagane do uczestnictwa w giełdzie zleceń" /> 


                        
                            <div class="marginLRT30">
                                <div class="field"> 
                                    <h:outputText class="label" value="Imię"/>  
                                    <h:inputText id="name" class="inputWidth" required="true" value="#{createClientMB.name}"> 
                                            <f:validateLength minimum="3" maximum="20" />
                                            <p:ajax event="keyup" update="nameMessage" />
                                    </h:inputText>
                                    <h:message for="name" errorClass="invalid" id="nameMessage" />
                                </div>
                                
                                <div class="field">
                                    <h:outputText class="label" value="Nazwisko"/>  
                                    <h:inputText id="surname" class="inputWidth" value="#{createClientMB.surname}" >
                                            <f:validateLength minimum="3" maximum="20" />
                                            <p:ajax event="keyup" update="surnameMessage" />
                                    </h:inputText>
                                    <h:message for="surname" errorClass="invalid" id="surnameMessage" />
                                </div>
                                
                                <div class="field">
                                    <h:outputText class="label" value="Płeć"/>
                                    <p:selectOneRadio style="font-weight: bold;" id="sex" value="#{createClientMB.sex}" > 
                                        <f:selectItem itemLabel="K" itemValue="false" /> 
                                        <f:selectItem itemLabel="M" itemValue="true" />
                                    </p:selectOneRadio>
                                </div>
                                
                                <div class="field"> 
                                    <h:outputText class="label" value="Nazwisko rodowe"/>  
                                    <h:inputText id="family" class="inputWidth" value="#{createClientMB.familyName}" > 
                                            <f:validateLength minimum="3" maximum="20" />
                                            <p:ajax event="keyup" update="familyMessage" />
                                    </h:inputText>
                                    <h:message for="family" errorClass="invalid" id="familyMessage" />
                                </div>
                                
                                <div class="field"> <h:outputText class="label" value="Data urodzenia"/>  <p:calendar navigator="true" styleClass="calendar" value="#{createClientMB.birthDate}"  /> </div>
                                <div class="field"> 
                                    <h:outputText class="label" value="Pesel"/> 
                                    <h:inputText class="inputWidth" value="#{createClientMB.pesel}" />
                                </div>
                            </div>

                            <div class="marginLR30">
                                <div class="field"> <h:outputText class="label fontBlack" value="Dane o dochodach"/> </div>
                          
                                <p:dataTable id="dochody" value="#{createClientMB.incomeTable}" var="data" emptyMessage="Nie dodano jeszcze żadnych dochodów" >
                                    
                                    <p:column headerText="Rodzaj">  
                                        <h:outputText value="#{data.employmentType}" />
                                    </p:column>  

                                    <p:column headerText="Branża"> 
                                        <h:outputText value="#{data.branch}" />
                                    </p:column>  

                                    <p:column headerText="Dochód">  
                                        <h:outputText value="#{data.incomeNetto}" />
                                    </p:column>  

                                    <p:column headerText=" ">  
                                        <h:outputText value="Usuń" />
                                    </p:column> 
                                </p:dataTable>

                                <p:commandLink styleClass="greyButton floatR" value="Dodaj" oncomplete="income.show()"  /> 
 
                            </div>
                        
                        


                        
                        
                        
                            <div class="marginLR30" >
                                <div class="field"> <h:outputText class="label fontBlack" value="Dane adresowe"/> </div>
                                
                                <div class="field"> <h:outputText class="label" value="Województwo "/> 
                                    <p:selectOneMenu styleClass="inputWidth3" value="#{createClientMB.regionId}">
                                        <f:selectItems value="#{dictionaryMB.region}" var="reg" itemLabel="#{reg.region}" itemValue="#{reg.idRegion}"   />
                                    </p:selectOneMenu>    
                                </div>
                                
                                <div class="field"> <h:outputText class="label" value="Miasto"/>  <h:inputText value="#{createClientMB.address.city}" class="inputWidth" /> </div>
                                <div class="field"> <h:outputText class="label" value="Kod pocztowy"/>  <h:inputText value="#{createClientMB.address.zipCode}"  class="inputWidth" /> </div>
                                <div class="field"> <h:outputText class="label" value="Ulica"/>  <h:inputText value="#{createClientMB.address.street}" class="inputWidth" /> </div>
                                <div class="field"> <h:outputText class="label" value="Numer domu"/>  <h:inputText value="#{createClientMB.address.houseNumber}" class="inputWidth" /> </div> 
                                <div class="field"> <h:outputText class="label" value="Telefon"/>  <h:inputText value="#{createClientMB.address.phone}"  class="inputWidth" /> </div>
                            
                            </div>
                      
                    </div> 
                
                    <div class="rightWiderBox">
                        <div class="marginTB20">
                            <h6 class="greenLeftBorder"> Możesz pominąć ten krok i od razu przejść do swojego profilu. </h6>
                            <h6 class="greenLeftBorder"> Zawsze można dodać te informacje w profilu. </h6> 
                        </div>
                        <div style="min-height: 40px;"> <h:link class="floatR greyButton wideButton" value="Pomiń ten krok" outcome="/client/clientMainPage.xhtml"/> </div>

                        <h4 class="greenLeftBorder"> SZYBKA POMOC </h4>
                        <div class="solidText" style="margin-bottom: 60px;"> 
                            Wypełnienie tego formularza pozwoli Ci na udział w giełdzie zleceń. Nie jest to w tej chwilii obowiązkowe.
                            Możesz pominąć ten krok, a następnie uzupełnić dane w panelu edycji konta. 
                            <br />
                            <br />                            
                            Im więcej danych podasz tym większa szansa, że twój wniosek zostanie wybrany przez jednego z najlepszych doradców. 
                            <br />
                            <br />   
                            Pamiętaj, że nie musisz obawiać się o swoją prywatność, gdyż nasz system oferuje pełną ochronę danych osobowych.

                            <br />
                            <br />
                            Jeśli masz problemy z wypełnieniem tego formularza skorzystaj z "samouczka" lub z kontaktuj się z naszym działem obsługi. 
                        </div>  
                    </div>


                </div>
                <div style="min-height: 30px;">
                    <h:commandButton class ="greenButton wideButton floatR marginTB20" type="submit" action="#{createClientMB.saveAndRedirect()}" value="Dalej" >
                    </h:commandButton>
                </div>
                </h:form>
                <div class="bottomTable topGreenLine">

                    <h4 class="greenLeftBorder"> PODGLĄD GIEŁDY </h4>
                    <p:dataTable>
                        <p:column headerText="Lp">  
                        </p:column>  

                        <p:column headerText="Numer klienta">  
                        </p:column>  

                        <p:column headerText="Data dodania">    
                        </p:column>  

                        <p:column headerText="Numer sprawy">  
                        </p:column>  

                        <p:column headerText="Postęp">  
                        </p:column> 

                        <p:column headerText="Rodzaj kredytu"  >  
                        </p:column> 

                        <p:column headerText="BIK">  
                        </p:column> 

                        <p:column headerText="Kod pocztowy">  
                        </p:column>

                        <p:column headerText="Wiek">  
                        </p:column>

                        <p:column headerText="Typ zatrudnienia">  
                        </p:column>

                        <p:column headerText="Branża">  
                        </p:column>

                        <p:column headerText="Trudności kredytu">  
                        </p:column>

                        <p:column headerText="Ilość doradców">  
                        </p:column>

                        <p:column headerText="Koniec aukcji">  
                        </p:column>  

                    </p:dataTable>

                </div>
                
                <p:dialog id="addBusiness" style="box-shadow: 0px 0px 0px rgba(0, 0, 0, 0); overflow: hidden; border-radius: 0px;" header="Dodaj informację o dochodach"  widgetVar="business" resizable="tfalse" height="550" width="650" showEffect="clip" hideEffect="explode" modal="true" >    
                                <h:form>  
                                  <p:commandButton  styleClass="floatL  wideButton marginTB20" action="#{createClientMB.toIncome()}" value="Umowa" oncomplete="business.hide(); income.show()"  >
                                     
                                  </p:commandButton>

                                  <p:commandButton styleClass="floatR  wideButton marginTB20" action="#{createClientMB.toBusinessActivity()}" value="Działalność" >
                                      
                                  </p:commandButton>             
                                <h:panelGroup id="panel2">
                                  <div style="max-height: 400px; overflow-y: auto; clear: both;">
                                  <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Typ umowy"/> 
                                      <p:selectOneMenu styleClass="marginT10 marginR5" style="width: 375px; float:right;" value="#{createClientMB.incomeId}">
                                          <f:selectItems value="#{dictionaryMB.businessActivity}" var="bi" itemLabel="#{bi.name}" itemValue="#{bi.idEmploymentType}"   />
                                      </p:selectOneMenu>         
                                  </div>

                                  <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Branża"/> 
                                      <p:selectOneMenu styleClass="marginT10 marginR5" style="width: 375px; margin-left: 31px; float:right;" value="#{createClientMB.branchId}">
                                          <f:selectItems value="#{dictionaryMB.branch}" var="dict" itemLabel="#{dict.name}" itemValue="#{dict.idBranch}" />
                                      </p:selectOneMenu>         
                                  </div>

                                  <div class="marginT10">  
                                      <h:outputText class="dialogLabel" value="Data rozpoczęcia"/> 
                                      <p:calendar navigator="true" styleClass="floatR marginT10 marginR5"  value="#{createClientMB.business.beginDate}"/> 
                                  </div> 

                                  <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Nr księgi przychodów i rozchodów"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.revenueExpenceLedger}" style="width: 20%" /> 
                                  </div>

                                  <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Przychód w roku obecnym (brutto)"/>
                                      <h:inputText  class="floatR marginT10 marginR5" value="#{createClientMB.business.incomeCurrentYearBrutto}" style="width: 20%" /> 
                                  </div>

                                  <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Przychód w roku obecnym (netto)"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.incomeCurrentYearNetto}" style="width: 20%" /> 
                                  </div>

                                  <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Przychód w roku poprzednim (brutto)"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.incomeLastYearBrutto}" style="width: 20%" /> 
                                  </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Przychód w roku poprzednim (netto)"/>
                                      <h:inputText class="floatR marginT10 marginR5 " value="#{createClientMB.business.incomeLastYearNetto}" style="width: 20%" /> 
                                 </div>


                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Zaliczka na podatek dochodowy (6 miesięcy w przód)"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.incomeTax6mthAdv}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Kwota zaległości ZUS"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.valueZus}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Kwota zaległości US"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.valueUs}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Kwota zaległości KRD"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.valueKrd}" style="width: 20%" /> 
                                 </div>

                                <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Tytuł zaległości w KRD"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.titleKrd}" style="width: 20%" /> 
                                 </div>

                                <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Amortyzacja w roku bieżącym"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.depreciationCurrentYear}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Amortyzacja w roku ubiegłym"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.depreciationLastYear}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - wysokość stawki"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.rateRe}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - przychód w roku ubiegłym"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.incomeLastYearRe}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - przychód w roku bieżącym"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.incomeCurrentYearRe}" style="width: 20%" /> 
                                 </div> 

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - kwota podatku (ostatni miesiąc)"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.taxValue1mth}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - kwota podatku (2 miesiące wstecz)"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.taxValue2mth}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - kwota podatku (3 miesiące wstecz)"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.taxValue3mth}" style="width: 20%" /> 
                                 </div>

                                 <div class="marginT10"> 
                                      <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - wysokość karty podatkowej"/>
                                      <h:inputText class="floatR marginT10 marginR5" value="#{createClientMB.business.constantAmountCard}" style="width: 20%" /> 
                                 </div>


                                </div>
                                 </h:panelGroup>
                                    
                                  <p:commandButton styleClass="floatL wideButton" style="clear:both; margin-top: 40px" action="#{createClientMB.cleanDialog()}" value="Anuluj" oncomplete="business.hide()"  />
                                  <p:commandButton styleClass="floatR wideButton" style="margin-top:40px;" action="#{createClientMB.addIncome()}" value="Dodaj" oncomplete="business.hide()"  />
                          </h:form>
                </p:dialog>
                
                <p:dialog id="addIncome" style="box-shadow: 0px 0px 0px rgba(0, 0, 0, 0); overflow: hidden; border-radius: 0px;" header="Dodaj informację o dochodach"  widgetVar="income" resizable="tfalse" height="340" width="550" showEffect="clip" hideEffect="explode" modal="true" >  
                            <h:form> 
                                <p:commandButton  styleClass="floatL  wideButton marginTB20" action="#{createClientMB.toIncome()}" value="Umowa"  >
                                    
                                </p:commandButton>
                                                  
                                <p:commandButton styleClass="floatR  wideButton marginTB20" action="#{createClientMB.toBusinessActivity()}" value="Działalność" oncomplete="income.hide(); business.show()" >
                                   
                                </p:commandButton>
                              
                                <h:panelGroup id="panel1">
                                    <div class="marginT10"> 
                                        <h:outputText class="dialogLabel" value="Typ umowy"/> 
                                        <p:selectOneMenu styleClass="marginT10" style="width: 375px; float:right;" value="#{createClientMB.incomeId}">
                                            <f:selectItems value="#{dictionaryMB.income}" var="empl" itemLabel="#{empl.name}" itemValue="#{empl.idEmploymentType}"   />
                                        </p:selectOneMenu>         
                                    </div>
                                   
                                    <div class="marginT10"> 
                                        <h:outputText class="dialogLabel" value="Branża"/> 
                                        <p:selectOneMenu styleClass="marginT10" style="width: 375px; margin-left: 31px; float:right;" value="#{createClientMB.branchId}">
                                            <f:selectItems value="#{dictionaryMB.branch}" var="dict" itemLabel="#{dict.name}" itemValue="#{dict.idBranch}" />
                                        </p:selectOneMenu>         
                                    </div>

                                   <div class="marginT10">  <h:outputText class="dialogLabel" value="Pracodawca"/> <h:inputText class="floatR marginT10" value="#{createClientMB.income.employer}" style="width: 70%" /> </div>
                                   <div class="marginT10">  <h:outputText class="dialogLabel" value="Dochód netto"/> <h:inputText class="floatR marginT10"  style="width: 39%" value="#{createClientMB.income.monthlyNetto}" /> </div>
                                   <div class="marginT10">  <h:outputText class="dialogLabel" value="Data rozpoczęcia"/> <p:calendar  navigator="true" styleClass="floatR marginT10"  value="#{createClientMB.income.beginDate}"/> </div> 
                               
                                   </h:panelGroup>
                                    <div>
                                            <p:commandButton styleClass="floatL wideButton" style="clear:both; margin-top: 40px" action="#{createClientMB.cleanDialog()}" value="Anuluj" oncomplete="income.hide()"  />
                                            <p:commandButton styleClass="floatR wideButton" style="margin-top:40px;" action="#{createClientMB.addIncome()}" ajax="false" value="Dodaj" oncomplete="income.hide()"  />
                                    </div>
                            </h:form>
                </p:dialog>
                
                
            </ui:define>
        </ui:composition>
    </body>
</html>
