<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>
        <ui:composition template="/templates/mainTemplate.xhtml">
            <ui:define name="title"> Klient - zakończona sprawa </ui:define> 
            <ui:define name="top"> 
                <h:outputStylesheet library="css" name="green.css" />
                 <f:metadata>         
                     <f:viewParam name="idConsultant" value="#{consultantProfileMB.idConsultant}" />
                 </f:metadata>
                 <f:event type="preRenderView" listener="#{consultantProfileMB.loadData()}" />
                        
                <div class="topbarLogo">
                    <h:graphicImage id="sf_logo" alt="could not be found."  value="/resources/images/spolecznosc_logo2.png" title="SF Logo" ></h:graphicImage>
                    <h:link outcome="/client/clientMainPage"> <h:graphicImage class="bigMenuButton" id="green_home_icon" alt="could not be found."  value="/resources/images/home_green.png" title="Home" ></h:graphicImage> </h:link>
                    <h:link outcome="/client/clientSettings"> <h:graphicImage class="bigMenuButton" id="profile_icon" alt="could not be found."  value="/resources/images/profile_logo_black.png" title="Profile" ></h:graphicImage> </h:link>
                </div>

                <div class="topbarMenuGreen">
                    <h:form>
                        <h:panelGroup>                    
                            <h:commandLink class="topMenuButton greyButton wideButton" value="Wyloguj" action="#{loginMB.logout()}"/>
                            <h:link class="topMenuButton greyButton wideButton" value="Edytuj dane" outcome="/index"/>
                            <h:link class="topMenuButton greyButton wideButton" value="Usuń konto" outcome="/index"/>
                            <h:link class="topMenuButton greyButton wideButton" value="Doładuj konto" outcome="/index"/>
                            <h:link class="topMenuButton greyButton wideButton" value="Zgłoś naruszenie zasad" outcome="/index"/>
                        </h:panelGroup>
                    </h:form>
                </div>
            </ui:define>

            <ui:define name="content">

                <h3> Profil konsultanta:  #{consultantProfileMB.selectedConsultant.lastName}  #{consultantProfileMB.selectedConsultant.name}</h3>

                <div>
                    <div class="leftInlineBox">
                        <h:form id="leftForm">         
                            <div class="marginLRT30">        
                                <div class="field"> 
                                    <h:outputText class="label" value="Doświadczenie"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.expirience}" /> 
                                </div>
                                
                                <div class="field marginB30"> 
                                    <h:outputText class="label" value="Zatrudnienie"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.workingPlace.name}" /> 
                                </div>
                                <h4> OBSŁUGIWANE BANKI</h4>
                                <p:dataList styleClass="fontGrey listOverflow marginB30" value="#{consultantProfileMB.selectBanksFromConsultant(consultantProfileMB.selectedConsultant)}" var="inst" >  
                                    #{inst.name} 
                                </p:dataList> 
                                <h4> INNE OBSŁUGIWANE INSTUTYCJE</h4>
                                <p:dataList styleClass="fontGrey listOverflow marginB30" value="#{consultantProfileMB.selectOtherInsFromConsultant(consultantProfileMB.selectedConsultant)}" var="inst" >  
                                    #{inst.name} 
                                </p:dataList> 
                                
                                <h4> OBSŁUGIWANE TYPY KREDYTÓW </h4>
                                <p:dataList styleClass="fontGrey listOverflow" value="#{consultantProfileMB.castProductTypeSetToArray(consultantProfileMB.selectedConsultant.productTypes)}" var="inst" >  
                                    #{inst.name} 
                                </p:dataList> 
                            </div>

                        </h:form>
                    </div>

                    <div class="rightInlineBox">
                        <h:form>
                            
                            <h:panelGroup rendered="#{! empty consultantProfileMB.selectedConsultant.consultantRatings}" >
                             <h4> ŚREDNIA OCENA </h4>
                             <div style="min-height: 58px;">
                                 <h:outputText class="boldItem" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].average}" > 
                                              <f:convertNumber maxFractionDigits="2"/>
                                 </h:outputText>
                             </div>
                             <h4> ILOŚĆ UKOŃCZONYCH SPRAW </h4>
                             <div style="min-height: 58px;"><h:outputText class="boldItem" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].rateCount}" /> </div>
                           
                             <h4> OCENA OGÓLNA </h4>         
                           
                                 <div class="field"> 
                                    <h:outputText class="label" value="Kontakt"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].contact}" >
                                        <f:convertNumber maxFractionDigits="2"/>
                                    </h:inputText>
                                </div>
                                <div class="field"> 
                                    <h:outputText class="label" value="Kultura"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].culture}" >
                                        <f:convertNumber maxFractionDigits="2"/>
                                    </h:inputText>
                                </div>
                                <div class="field"> 
                                    <h:outputText class="label" value="Kompetencje"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].competence}" > 
                                        <f:convertNumber maxFractionDigits="2"/>
                                    </h:inputText>
                                </div>
                                <div class="field"> 
                                    <h:outputText class="label" value="Punktualność"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].punctuality}" > 
                                        <f:convertNumber maxFractionDigits="2"/>
                                    </h:inputText>
                                </div>
                                <div class="field"> 
                                    <h:outputText class="label" value="Rzetelność"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].reliability}" > 
                                         <f:convertNumber maxFractionDigits="2"/>
                                    </h:inputText>
                                </div>
                                <div class="field"> 
                                    <h:outputText class="label" value="Szacunek"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].respect}"> 
                                           <f:convertNumber maxFractionDigits="2"/>
                                    </h:inputText>
                                </div>
                                <div class="field"> 
                                    <h:outputText class="label" value="Trud"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].difficulty}" > 
                                           <f:convertNumber maxFractionDigits="2"/>
                                    </h:inputText>
                                </div>                                
                                <div class="field"> 
                                    <h:outputText class="label" value="Zaufanie"/> 
                                    <h:inputText class="inputWidth fontBlack" disabled="true" value="#{consultantProfileMB.selectedConsultant.consultantRatings.toArray()[0].trust}" > 
                                           <f:convertNumber maxFractionDigits="2"/>
                                    </h:inputText>
                                </div>
                             
                             
                             <h4> KOMENTARZE </h4>

                             <p:dataList styleClass="fontGrey listOverflow" value="#{consultantProfileMB.casesRated}" var="inst" >  
                                  #{inst.caseRating.commentDate} <br />  #{inst.caseRating.comment} 
                             </p:dataList> 
                             
                            </h:panelGroup>
                            
                        </h:form>
                    </div>
                </div>
            
            </ui:define>

        </ui:composition>
    </body>
</html>
