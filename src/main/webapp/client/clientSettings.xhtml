<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">



    <body>

        <ui:composition template="/templates/mainTemplate.xhtml">
            <ui:define name="title"> Klient - ustawienia konta </ui:define> 


            <ui:define name="content">

                <script>
                    
                    $(document).ready(function(){
                        $("#uploadButton1").click(function(){
                            $("#upload1").toggle();
                        });
                        $("#uploadButton2").click(function(){
                            $("#upload2").toggle();
                        });
                        $("#uploadButton3").click(function(){
                            $("#upload3").toggle();
                        });
                        $("#uploadButton4").click(function(){
                            $("#upload4").toggle();
                        });
                        $("#uploadButton5").click(function(){
                            $("#upload5").toggle();
                        });
                        $("#uploadButton6").click(function(){
                            $("#upload6").toggle();
                        });
                        $("#uploadButton7").click(function(){
                            $("#upload7").toggle();
                        });
                        $("#uploadButton8").click(function(){
                            $("#upload8").toggle();
                        });
                    });

                </script>




                <div class="marginT50">
                    <h3 class="greenLeftBorder"> Ustawienie konta </h3>
                </div>

                <div style="height:auto;">

                    <div class="leftInlineBox">

                        <h:form id="form1"> 

                            <div class="marginLRT30">

                                <h4>DANE PERSONALNE</h4> 

                                <div class="field" style="margin-bottom: 60px;">
                                    <h:outputText class="label" value="Adres email"/> 
                                    <h:inputText id="email" class="inputWidth" value="#{clientSettingsMB.client.user.email}" validator="#{clientSettingsMB.validateEmail}">
                                        <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" /> 
                                        <p:ajax event="keyup" update="emailMessage"/>
                                    </h:inputText>
                                    <h:message for="email" errorClass="invalid" id="emailMessage" /> 
                                    <h:outputText class="label3"  value="Na ten email będzie wysyłana wszelka korespondencja dotycząca twojego konta."/> 
                                </div>

                                <div class="field"> 
                                    <h:outputText class="label" value="Imię"/>  
                                    <h:inputText id="name" class="inputWidth" required="true" value="#{clientSettingsMB.client.name}"> 
                                        <f:validateLength minimum="3" maximum="20" />
                                        <p:ajax event="keyup" update="nameMessage" />
                                    </h:inputText>
                                    <h:message for="name" errorClass="invalid" id="nameMessage" />
                                </div>

                                <div class="field">
                                    <h:outputText class="label" value="Nazwisko"/>  
                                    <h:inputText required="true" id="surname" class="inputWidth" value="#{clientSettingsMB.client.lastName}" >
                                        <f:validateLength minimum="3" maximum="20" />
                                        <p:ajax event="keyup" update="surnameMessage" />
                                    </h:inputText>
                                    <h:message for="surname" errorClass="invalid" id="surnameMessage" />
                                </div>

                                <div class="field">
                                    <h:outputText class="label" value="Płeć"/>
                                    <p:selectOneRadio style="font-weight: bold;" id="sex" value="#{clientSettingsMB.client.sex}" >
                                        <f:selectItem itemLabel="K" itemValue="false" /> 
                                        <f:selectItem itemLabel="M" itemValue="true" />
                                    </p:selectOneRadio>
                                </div>

                                <div class="field"> 
                                    <h:outputText class="label" value="Nazwisko rodowe"/>  
                                    <h:inputText id="family" class="inputWidth" value="#{clientSettingsMB.client.familyName}" > 
                                        <f:validateLength minimum="3" maximum="20" />
                                        <p:ajax event="keyup" update="familyMessage" />
                                    </h:inputText>
                                    <h:message for="family" errorClass="invalid" id="familyMessage" />
                                </div>

                                <div class="field"> 
                                    <h:outputText  class="label" value="Data urodzenia"/> 
                                    <p:calendar  pattern="dd-MM-yyyy" id="birthDate" yearRange="1900:2010" navigator="true" styleClass="calendar" value="#{clientSettingsMB.client.birthDate}" >
                                        <f:convertDateTime type="date" pattern="dd-MM-yyyy" />
                                        <p:ajax  event="keyup" update="birthDateMessage" />
                                    </p:calendar>
                                    <h:message for="birthDate" errorClass="invalid" id="birthDateMessage" />
                                </div>

                                <div class="field"> 
                                    <h:outputText class="label" value="Pesel"/> 
                                    <h:inputText id="pesel" class="inputWidth" value="#{clientSettingsMB.client.pesel}" >
                                        <f:validateLength minimum="11" maximum="11" />
                                        <f:convertNumber integerOnly="" />
                                        <p:ajax event="keyup" update="peselMessage" />
                                    </h:inputText>
                                    <h:message for="pesel" errorClass="invalid" id="peselMessage" />
                                </div>

                                <div class="field"> <h:outputText class="label" value="Stan cywilny"/> 
                                    <p:selectOneMenu style="width:214px" value="#{clientSettingsMB.idMartialStatus}">
                                        <f:selectItems value="#{dictionaryItemsMB.maritalStatus}" var="ms" itemLabel="#{ms.name}" itemValue="#{ms.idMaritalStatus}"   />
                                    </p:selectOneMenu>    
                                </div>

                                <div class="field"> <h:outputText class="label" value="Wykształcenie"/> 
                                    <p:selectOneMenu style="width:214px"  value="#{clientSettingsMB.idEducation}">
                                        <f:selectItems value="#{dictionaryItemsMB.education}" var="edu" itemLabel="#{edu.name}" itemValue="#{edu.idEducation}"   />
                                    </p:selectOneMenu>    
                                </div>
                            </div>

                            <div class="marginLR30">

                                <h4>DANE O DOCHODACH</h4>

                                <p:dataTable style="clear:both" id="table" value="#{clientSettingsMB.incomeTable}" var="data" emptyMessage="Nie dodano jeszcze żadnych dochodów" >

                                    <p:column headerText="Rodzaj">  
                                        <h:outputText  value="#{data.employmentType}" />
                                    </p:column>  

                                    <p:column headerText="Branża"> 
                                        <h:outputText value="#{data.branch}" />
                                    </p:column>  

                                    <p:column headerText="Dochód">  
                                        <h:outputText value="#{data.incomeNetto}" />
                                    </p:column>  

                                    <p:column headerText="">  
                                        <p:commandLink value="Usuń"  action="#{clientSettingsMB.deleteIncome(data.idIncome,data.isIncome)}" update=":form1:table">
                                        </p:commandLink>
                                    </p:column> 
                                </p:dataTable>

                                <p:commandLink styleClass="greyButton floatR" value="Dodaj" oncomplete="income.show()"  /> 

                            </div>

                            <div class="marginLR30" >

                                <h4>DANE ADRESOWE</h4>


                                <div class="field"> <h:outputText class="label" value="Województwo "/> 
                                    <p:selectOneMenu id="region" style="width:214px"  value="#{clientSettingsMB.idMainRegion}">
                                        <f:selectItems value="#{dictionaryItemsMB.region}" var="reg" itemLabel="#{reg.region}" itemValue="#{reg.idRegion}"   />
                                        <f:validator disabled="#{!createClientMB.areRequired}" validatorId="com.efsf.sf.util.ComboBoxNoInputValidator" />

                                        <p:ajax event="keyup" update="regionMessage" />
                                    </p:selectOneMenu>    
                                    <h:message for="region" errorClass="invalid" id="regionMessage" />
                                </div>

                                <div class="field"> 
                                    <h:outputText class="label" value="Miasto"/> 
                                    <h:inputText id="city" value="#{clientSettingsMB.mainAddress.city}" class="inputWidth" > 
                                        <f:validateLength minimum="3" maximum="30" />
                                        <p:ajax event="keyup" update="cityMessage" />
                                    </h:inputText>
                                    <h:message for="city" errorClass="invalid" id="cityMessage" />
                                </div>

                                <div class="field"> 
                                    <h:outputText class="label" value="Kod pocztowy"/> 
                                    <h:inputText  id="zipCode" value="#{clientSettingsMB.mainAddress.zipCode}"  class="inputWidth" > 
                                        <f:validateLength minimum="6" maximum="6" />
                                        <p:ajax event="keyup" update="zipCodeMessage" />
                                    </h:inputText>
                                    <h:message for="zipCode" errorClass="invalid" id="zipCodeMessage" />
                                </div>

                                <div class="field">
                                    <h:outputText class="label" value="Ulica"/> 
                                    <h:inputText id="street" value="#{clientSettingsMB.mainAddress.street}" class="inputWidth" >
                                        <f:validateLength minimum="3" maximum="30" />
                                        <p:ajax event="keyup" update="streetMessage" />
                                    </h:inputText>
                                    <h:message for="street" errorClass="invalid" id="streetMessage" />
                                </div>

                                <div class="field"> 
                                    <h:outputText class="label" value="Numer domu"/> 
                                    <h:inputText id="streetNumber" value="#{clientSettingsMB.mainAddress.houseNumber}" class="inputWidth" > 
                                        <f:validateLength minimum="3" maximum="10" />
                                        <p:ajax event="keyup" update="streetNumberMessage" />
                                    </h:inputText>
                                    <h:message for="streetNumber" errorClass="invalid" id="streetNumberMessage" /> 
                                </div> 

                                <div class="field"> 
                                    <h:outputText class="label" value="Telefon"/> 
                                    <h:inputText id="phone" value="#{clientSettingsMB.mainAddress.phone}"  class="inputWidth" >
                                        <f:validateLength minimum="7" maximum="20" />
                                        <p:ajax event="keyup" update="phoneMessage" />
                                    </h:inputText>
                                    <h:message for="phone" errorClass="invalid" id="phoneMessage" /> 
                                </div>

                                <h:commandLink  class ="greenButton wideButton floatR marginTB20"  value="Zapisz ustawienia" action="#{clientSettingsMB.updateSettings()}" />

                            </div>

                        </h:form>

                    </div>

                    <div class="rightInlineBox" >

                        <h:form> 

                            <div class="marginLRT30">
                                <h4>USTAW ZDJĘCIE</h4>
                                <h:graphicImage class="photoChange" id="profil_logo_green_small" alt="could not be found."  value="/resources/images/profil_green.png" title="Profil Green Small" ></h:graphicImage>
                                <h:outputText class="fontGrey photoChangeText" value="Twoje zdjęcie musi być zapisane jako plik graficzny (JPG, JPEG, GIF, PNG), a rozmiar nie może przekroczyć 5MB." ></h:outputText>
                                <h:inputText  class="label2 browseInput" style="width: 54%; display: inline;"  value="przeglądaj..." />
                                <h:link class="wideButton redX browseButton" value="Usuń zdjęcie" />
                            </div>

                        </h:form>


                        <h:form> 

                            <div class="marginLRT30">

                                <h4 class="greenLeftBorder">ZMIANA HASŁA</h4>

                                <div class="field">
                                    <h:outputText class="label" value="Obecne hasło"/>  
                                    <h:inputSecret required="true" id="cPassword"  value="#{clientSettingsMB.currentPassword}" validator="#{clientSettingsMB.validateCurrentPassword}"> 
                                        <f:validateLength minimum="8" maximum="20" />
                                        <p:ajax event="keyup" update="currentPasswordMessage"/>
                                    </h:inputSecret>
                                    <h:message for="cPassword" errorClass="invalid" id="currentPasswordMessage" />
                                </div>

                                <div class="field">
                                    <h:outputText class="label" value="Nowe hasło"/> 
                                    <h:inputSecret required="true" value="#{clientSettingsMB.newPassword}" >
                                        <f:validateLength minimum="8" maximum="20" />
                                        <p:ajax event="keyup" update="confirmPasswordMessage"/>
                                    </h:inputSecret>
                                </div>

                                <div class="field">
                                    <h:outputText class="label" value="Powtórz hasło"/> 
                                    <h:inputSecret id="confirmPassword" required="true" value="#{clientSettingsMB.confirmNewPassword}" validator="#{clientSettingsMB.validateSamePassword}" > 
                                        <f:validateLength minimum="8" maximum="20"/>
                                        <p:ajax event="keyup" update="confirmPasswordMessage"/>
                                    </h:inputSecret>
                                    <h:message for="confirmPassword" errorClass="invalid" id="confirmPasswordMessage" />
                                </div>

                                <div style="min-height: 40px"> 
                                    <h:commandLink class="floatR greyButton wideButton" type="submit" value="Zmień" action="#{clientSettingsMB.updatePassword()}"/>
                                </div>

                            </div>

                        </h:form>


                        
                        <h:form id="uploadForm" enctype="multipart/form-data" >

                            <div class="marginLRT30">      

                                <h4 class="greenLeftBorder">AKTUALIZACJA RAPORTU BIK</h4>

                                <div> 
                                    <h:outputText class="redMessage marginL20" value="UWAGA! Minęła ważność Twojego raportu BIK!" /> 
                                </div>
                                <div>
                                    <h:outputText class="redMessage marginL20" value="Zaktualizuj swój raport BIK." /> 
                                </div>
                                <div class="marginTB20">
                                    <div> <h:outputText class="fontGrey marginL20" value="Wgraj zeskanowany raport BIK w postaci .zip." /> </div>    
                                    <div> <h:outputText class="fontGrey marginL20 wordSpace" value="Dowiedz się" />
                                        <h:link class="redMessage" value="jak to zrobić." /> </div>
                                </div>
                                <div class="marginTB20">
                                    <div> <h:outputText  class="fontGrey marginL20" value="Jeżeli posiadasz raport BIK w formacie PDF," /> </div>    
                                    <div> <h:link class="redMessage marginL20 wordSpace" value="kliknij tutaj." /> </div>
                                </div>


                            </div>

                            <div class="marginLRT30">  

                                 <h:outputLabel class="uploaderLabel" id="bikLabel">Dodaj lub przeglądaj raport BIK</h:outputLabel>     
                                
                                    <h:commandLink target="_blank" action="#{ fileDownloadMB.load8() }">
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.bik!=null}" alt="could not be found."  value="/resources/icons/Document-icon.png" />
                                    </h:commandLink>

                                 <span id="uploadButton8"> 
                                     <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.bik==null}" alt="could not be found."  value="/resources/icons/File-New-icon.png" />
                                     <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.bik!=null}" alt="could not be found."  value="/resources/icons/File-Reload-icon.png" />                              
                                 </span>

                                      <span id="upload8" style="display:none; float: right;">
                                        <p:fileUpload  styleClass="greyButton"  id="idBIK" value="#{ fileUploadMB.uploadedFiles[7] }" mode="simple" > 
                                            <f:validator validatorId="fileUploadValidator" />
                                        </p:fileUpload>
                                      </span>
                                    <h:message for="idBIK"  errorClass="invalid"  /> 

                                </div>

                       

                        

                       
                            <div class="marginLRT30" style=" margin-top: 40px;">     

                                <h4>WYMAGANE DOKUMENTY</h4>

                                <div class="marginTB20">
                                    <h:outputLabel class="uploaderLabel" id="idCardLabel">Dowód tożsamości: </h:outputLabel>     

                                    <h:commandLink target="_blank" action="#{ fileDownloadMB.load1() }">
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.idCard!=null}" alt="could not be found."  value="/resources/icons/Document-icon.png" />
                                    </h:commandLink>

                                    <span id="uploadButton1"> 
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.idCard==null}" alt="could not be found."  value="/resources/icons/File-New-icon.png" /> 
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.idCard!=null}" alt="could not be found."  value="/resources/icons/File-Reload-icon.png" />                                                                 
                                    </span>

                                    <span id="upload1" style="display:none; float: right;">
                                        <p:fileUpload  styleClass="greyButton" id="idCardUpload" value="#{ fileUploadMB.uploadedFiles[0] }" mode="simple" > 
                                            <f:validator validatorId="fileUploadValidator" />
                                        </p:fileUpload>
                                    </span>
                                    <h:message for="idCardUpload"  errorClass="invalid" /> 

                                </div>

                                <div class="marginTB20">
                                    <h:outputLabel class="uploaderLabel" id="idIncomeStatementLabel">Zaświadczenie o zarobkach: </h:outputLabel>   

                                    <h:commandLink target="_blank" action="#{ fileDownloadMB.load2() }">
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.incomeStatement!=null}" alt="could not be found."  value="/resources/icons/Document-icon.png" />
                                    </h:commandLink>

                                    <span id="uploadButton2"> 
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.incomeStatement==null}" alt="could not be found."  value="/resources/icons/File-New-icon.png" /> 
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.incomeStatement!=null}"  alt="could not be found."  value="/resources/icons/File-Reload-icon.png" />               
                                    </span>

                                      <span id="upload2" style="display:none; float: right;">
                                        <p:fileUpload styleClass="greyButton" id="idIncomeStatement" value="#{ fileUploadMB.uploadedFiles[1] }" mode="simple" > 
                                            <f:validator validatorId="fileUploadValidator" />
                                        </p:fileUpload>
                                      </span>
                                    <h:message for="idIncomeStatement"  errorClass="invalid"  /> 

                                </div>

                                <div class="marginTB20">
                                    <h:outputLabel class="uploaderLabel"  id="idDeathCertificateLabel">Akt zgonu współmałżonka: </h:outputLabel>       

                                    <h:commandLink target="_blank" action="#{ fileDownloadMB.load3() }">
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.deathCertificate!=null}" alt="could not be found."  value="/resources/icons/Document-icon.png" />
                                    </h:commandLink>

                                    <span id="uploadButton3">
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.deathCertificate==null}"  alt="could not be found."  value="/resources/icons/File-New-icon.png" /> 
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.deathCertificate!=null}"   alt="could not be found."  value="/resources/icons/File-Reload-icon.png" />        
                                    </span>

                                      <span id="upload3" style="display:none; float: right;">
                                        <p:fileUpload   styleClass="greyButton" id="idDeathCertificate" value="#{ fileUploadMB.uploadedFiles[2] }" mode="simple" > 
                                            <f:validator validatorId="fileUploadValidator" />
                                        </p:fileUpload>
                                     </span>
                                    <h:message for="idDeathCertificate"  errorClass="invalid"  /> 

                                </div>

                                <div class="marginTB20">
                                    <h:outputLabel class="uploaderLabel"  id="idMariageSettlementLabel">Intercyza: </h:outputLabel>       

                                    <h:commandLink target="_blank" action="#{ fileDownloadMB.load4() }">
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.mariageSettlement!=null}" alt="could not be found."  value="/resources/icons/Document-icon.png" />
                                    </h:commandLink>

                                    <span id="uploadButton4">
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.mariageSettlement==null}" alt="could not be found."  value="/resources/icons/File-New-icon.png" /> 
                                        <h:graphicImage rendered="#{fileDownloadMB.requiredDocuments.mariageSettlement!=null}" alt="could not be found."  value="/resources/icons/File-Reload-icon.png" />   
                                    </span>

                                     <span id="upload4" style="display:none; float: right;">
                                        <p:fileUpload   styleClass="greyButton" id="idMariageSettlement" value="#{ fileUploadMB.uploadedFiles[3] }" mode="simple" > 
                                            <f:validator validatorId="fileUploadValidator" />
                                        </p:fileUpload>
                                    </span>
                                    <h:message for="idMariageSettlement"  errorClass="invalid" /> 

                                </div>

                                <div class="marginTB20">
                                    <h:outputLabel class="uploaderLabel"  id="idDivorceActLabel">Akt rozwodu: </h:outputLabel>       

                                    <h:commandLink target="_blank" action="#{ fileDownloadMB.load5() }">
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.divorceAct!=null}" alt="could not be found."  value="/resources/icons/Document-icon.png" />
                                    </h:commandLink>

                                    <span id="uploadButton5"> 
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.divorceAct==null}"  alt="could not be found."  value="/resources/icons/File-New-icon.png" /> 
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.divorceAct!=null}"  alt="could not be found."  value="/resources/icons/File-Reload-icon.png" />   
                                    </span>

                                      <span id="upload5" style="display:none; float: right;">
                                        <p:fileUpload   styleClass="greyButton" id="idDivorceAct" value="#{ fileUploadMB.uploadedFiles[4] }" mode="simple" > 
                                            <f:validator validatorId="fileUploadValidator" />
                                        </p:fileUpload>
                                    </span>
                                    <h:message for="idDivorceAct"  errorClass="invalid"  /> 

                                </div>

                                <div class="marginTB20">
                                    <h:outputLabel class="uploaderLabel"  id="idSeparationActLabel">Akt separacji: </h:outputLabel>       

                                    <h:commandLink target="_blank" action="#{ fileDownloadMB.load6() }">
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.separationAct!=null}" alt="could not be found."  value="/resources/icons/Document-icon.png" />
                                    </h:commandLink>

                                    <span id="uploadButton6">
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.separationAct==null}" alt="could not be found."  value="/resources/icons/File-New-icon.png" />
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.separationAct!=null}" alt="could not be found."  value="/resources/icons/File-Reload-icon.png" /> 
                                    </span>

                                      <span id="upload6" style="display:none; float: right;">
                                        <p:fileUpload  styleClass="greyButton"  id="idSeparationAct" value="#{ fileUploadMB.uploadedFiles[5] }" mode="simple" > 
                                            <f:validator validatorId="fileUploadValidator" />
                                        </p:fileUpload>
                                    </span>
                                    <h:message for="idSeparationAct"  errorClass="invalid"  /> 

                                </div>

                                <div class="marginTB20">
                                    <h:outputLabel class="uploaderLabel"  id="idTitleDeadLabel">Akt własności: </h:outputLabel>       

                                    <h:commandLink target="_blank" action="#{ fileDownloadMB.load7() }">
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.titleDeed!=null}" alt="could not be found."  value="/resources/icons/Document-icon.png" />
                                    </h:commandLink>

                                    <span id="uploadButton7"> 
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.titleDeed==null}" alt="could not be found."  value="/resources/icons/File-New-icon.png" /> 
                                        <h:graphicImage rendered="#{ fileDownloadMB.requiredDocuments.titleDeed!=null}" alt="could not be found."  value="/resources/icons/File-Reload-icon.png" /> 
                                    </span>

                                      <span id="upload7" style="display:none; float: right;">
                                        <p:fileUpload  styleClass="greyButton"  id="idTitleDead" value="#{ fileUploadMB.uploadedFiles[6] }" mode="simple" > 
                                            <f:validator validatorId="fileUploadValidator" />
                                        </p:fileUpload>
                                    </span>
                                    <h:message for="idTitleDead"  errorClass="invalid"  /> 

                                </div>

                                


                                <p:commandLink ajax="false" id="przycisk1" styleClass="greenButton wideButton floatR marginTB20"  value="Wczytaj pliki" type="submit" onclick="statusDialog.show();" action="#{ fileUploadMB.save() }" />      

                                
                            </div>

                        </h:form>

                    </div>




                </div>



                <p:dialog modal="true" widgetVar="statusDialog" resizable="false" showHeader="false" header="Wczytywanie..." style="padding-bottom: 0px; height: 165px; background: none; box-shadow: 0 0 0;" height="145px" draggable="false" closable="false">  

                    <div id="circular3dG" >
                        <div id="circular3d_1G" class="circular3dG">
                        </div>
                        <div id="circular3d_2G" class="circular3dG">
                        </div>
                        <div id="circular3d_3G" class="circular3dG">
                        </div>
                        <div id="circular3d_4G" class="circular3dG">
                        </div>
                        <div id="circular3d_5G" class="circular3dG">
                        </div>
                        <div id="circular3d_6G" class="circular3dG">
                        </div>
                        <div id="circular3d_7G" class="circular3dG">
                        </div>
                        <div id="circular3d_8G" class="circular3dG">
                        </div>
                    </div>
                    <div class="label">Wysyłanie...</div>
                    
                </p:dialog>  



                <p:dialog id="addBusiness"  style="box-shadow: 0px 0px 0px rgba(0, 0, 0, 0); overflow: hidden; border-radius: 0px;" header="Dodaj informację o dochodach"  widgetVar="business" resizable="false" height="550" width="650" showEffect="clip" hideEffect="explode" modal="true" >    
                    <h:form>  
                        <p:commandButton  styleClass="floatL  wideButton marginTB20"  action="#{clientSettingsMB.toIncome()}" value="Umowa" oncomplete="business.hide(); income.show()"  >

                        </p:commandButton>  

                        <p:commandButton styleClass="floatR  wideButton marginTB20" action="#{clientSettingsMB.toBusinessActivity()}" value="Działalność" >

                        </p:commandButton>             
                        <h:panelGroup id="panel2">
                            <div style="max-height: 400px; overflow-y: auto; clear: both;">

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Typ umowy"/> 
                                    <p:selectOneMenu styleClass="marginT10 marginR5" style="width: 375px; float:right;" value="#{clientSettingsMB.incomeId}">
                                        <f:selectItems value="#{dictionaryItemsMB.businessActivity}" var="bi" itemLabel="#{bi.name}" itemValue="#{bi.idEmploymentType}"   />
                                    </p:selectOneMenu>         
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Branża"/> 
                                    <p:selectOneMenu styleClass="marginT10 marginR5" style="width: 375px; margin-left: 31px; float:right;" value="#{clientSettingsMB.branchId}">
                                        <f:selectItems value="#{dictionaryItemsMB.branch}" var="dict" itemLabel="#{dict.name}" itemValue="#{dict.idBranch}" />
                                    </p:selectOneMenu>         
                                </div>

                                <div class="marginT10">  
                                    <h:outputText class="dialogLabel" value="Data rozpoczęcia"/> 
                                    <p:calendar id="beginDate2" yearRange="1960:2030" maxdate="#{clientSettingsMB.currentDate}" pattern="dd-MM-yyyy" navigator="true" styleClass="floatR marginT10"  value="#{clientSettingsMB.income.beginDate}"> 
                                        <f:convertDateTime type="date" pattern="dd-MM-yyyy" />
                                        <p:ajax  event="keyup" update="beginDate2Message" />
                                    </p:calendar>
                                    <h:message for="beginDate2" errorClass="invalid" id="beginDate2Message" />
                                </div> 

                                <div class="marginT10"> 
                                    <h:outputText  class="dialogLabel" value="Nr księgi przychodów i rozchodów"/>
                                    <h:inputText id="ledger" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.revenueExpenceLedger}" style="width: 20%" > 
                                        <f:validateLength minimum="3"/>
                                        <p:ajax  event="keyup" update="ledgerMessage" />
                                    </h:inputText>
                                    <h:message for="ledger" errorClass="invalid" id="ledgerMessage" />

                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Przychód w roku obecnym (brutto)"/>
                                    <h:inputText id="currentIncomeBrutto"  class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.incomeCurrentYearBrutto}" style="width: 20%" > 
                                        <f:convertNumber maxFractionDigits="2" />
                                        <p:ajax  event="keyup" update="currentIncomeBruttoMessage" />
                                    </h:inputText>
                                    <h:message for="currentIncomeBrutto" errorClass="invalid" id="currentIncomeBruttoMessage" />
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Przychód w roku obecnym (netto)"/>
                                    <h:inputText id="currentIncomeNetto" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.incomeCurrentYearNetto}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Przychód w roku poprzednim (brutto)"/>
                                    <h:inputText id="lastIncomeBrutto" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.incomeLastYearBrutto}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Przychód w roku poprzednim (netto)"/>
                                    <h:inputText id="lastIncomeNetto" class="floatR marginT10 marginR5 " value="#{clientSettingsMB.business.incomeLastYearNetto}" style="width: 20%" /> 
                                </div>


                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Zaliczka na podatek dochodowy (6 miesięcy w przód)"/>
                                    <h:inputText id="advance" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.incomeTax6mthAdv}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Kwota zaległości ZUS"/>
                                    <h:inputText id="ZUS" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.valueZus}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Kwota zaległości US"/>
                                    <h:inputText id="US" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.valueUs}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Kwota zaległości KRD"/>
                                    <h:inputText id="KRD" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.valueKrd}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Tytuł zaległości w KRD"/>
                                    <h:inputText id="titleKRD" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.titleKrd}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Amortyzacja w roku bieżącym"/>
                                    <h:inputText id="currentAmortization" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.depreciationCurrentYear}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Amortyzacja w roku ubiegłym"/>
                                    <h:inputText id="lastAmortization" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.depreciationLastYear}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - wysokość stawki"/>
                                    <h:inputText id="REvalue" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.rateRe}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - przychód w roku ubiegłym"/>
                                    <h:inputText id="REincomeLast" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.incomeLastYearRe}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - przychód w roku bieżącym"/>
                                    <h:inputText id="REincomeCurrent" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.incomeCurrentYearRe}" style="width: 20%" /> 
                                </div> 

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - kwota podatku (ostatni miesiąc)"/>
                                    <h:inputText id="month1st" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.taxValue1mth}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - kwota podatku (2 mies. wstecz)"/>
                                    <h:inputText id="month2nd" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.taxValue2mth}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - kwota podatku (3 mies. wstecz)"/>
                                    <h:inputText id="month3rd" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.taxValue3mth}" style="width: 20%" /> 
                                </div>

                                <div class="marginT10"> 
                                    <h:outputText class="dialogLabel" value="Ryczałt ewidencjonowany - wysokość karty podatkowej"/>
                                    <h:inputText id="card" class="floatR marginT10 marginR5" value="#{clientSettingsMB.business.constantAmountCard}" style="width: 20%" /> 
                                </div>


                            </div>

                        </h:panelGroup>

                        <p:commandButton styleClass="floatL wideButton" style="clear:both; margin-top: 40px" action="#{clientSettingsMB.cleanDialog()}" value="Anuluj" oncomplete="business.hide()"  />
                        <p:commandButton styleClass="floatR wideButton" style="margin-top:40px;" action="#{clientSettingsMB.addIncome()}" value="Dodaj" ajax="false" oncomplete="business.hide()"  />

                    </h:form>

                </p:dialog>







                <p:dialog id="addIncome" style="box-shadow: 0px 0px 0px rgba(0, 0, 0, 0); overflow: hidden; border-radius: 0px;" header="Dodaj informację o dochodach"  widgetVar="income" resizable="false" height="340" width="550" showEffect="clip" hideEffect="explode" modal="true" >  

                    <h:form> 

                        <p:commandButton  styleClass="floatL  wideButton marginTB20" action="#{clientSettingsMB.toIncome()}" value="Umowa"  >

                        </p:commandButton>

                        <p:commandButton styleClass="floatR  wideButton marginTB20" action="#{clientSettingsMB.toBusinessActivity()}" value="Działalność" oncomplete="income.hide(); business.show()" >

                        </p:commandButton>

                        <h:panelGroup id="panel1">
                            <div class="marginT10"> 
                                <h:outputText class="dialogLabel" value="Typ umowy"/> 
                                <p:selectOneMenu styleClass="marginT10" style="width: 375px; float:right;" value="#{clientSettingsMB.incomeId}">
                                    <f:selectItems value="#{dictionaryItemsMB.income}" var="empl" itemLabel="#{empl.name}" itemValue="#{empl.idEmploymentType}"   />
                                </p:selectOneMenu>         
                            </div>

                            <div class="marginT10"> 
                                <h:outputText class="dialogLabel" value="Branża"/> 
                                <p:selectOneMenu styleClass="marginT10" style="width: 375px; margin-left: 31px; float:right;" value="#{clientSettingsMB.branchId}">
                                    <f:selectItems value="#{dictionaryItemsMB.branch}" var="dict" itemLabel="#{dict.name}" itemValue="#{dict.idBranch}" />
                                </p:selectOneMenu>         
                            </div>

                            <div class="marginT10">  
                                <h:outputText class="dialogLabel" value="Pracodawca"/> 
                                <h:inputText id="employer" class="floatR marginT10" value="#{clientSettingsMB.income.employer}" style="width: 70%" >
                                    <f:validateLength minimum="3" maximum="40" />
                                    <p:ajax event="keyup" update="employerMessage" />
                                </h:inputText>
                                <h:message for="employer" errorClass="invalid" id="employerMessage" />
                            </div>
                            <div class="marginT10"> 
                                <h:outputText class="dialogLabel" value="Dochód netto"/>
                                <h:inputText id="incomeNetto" class="floatR marginT10"  style="width: 39%" value="#{clientSettingsMB.income.monthlyNetto}" >
                                    <f:convertNumber maxFractionDigits="2" />
                                    <p:ajax  event="keyup" update="incomeNettoMessage" />
                                </h:inputText>
                                <h:message for="incomeNetto" errorClass="invalid" id="incomeNettoMessage" />
                            </div>

                            <div class="marginT10"> 
                                <h:outputText class="dialogLabel" value="Data rozpoczęcia"/> 
                                <p:calendar id="beginDate" yearRange="1960:2030" maxdate="#{clientSettingsMB.currentDate}" pattern="dd-MM-yyyy" navigator="true" styleClass="floatR marginT10"  value="#{clientSettingsMB.income.beginDate}"> 
                                    <f:convertDateTime type="date" pattern="dd-MM-yyyy" />
                                    <p:ajax  event="keyup" update="beginDateMessage" />
                                </p:calendar>
                                <h:message for="beginDate" errorClass="invalid" id="beginDateMessage" />
                            </div> 

                        </h:panelGroup>
                        <div>
                            <p:commandButton styleClass="floatL wideButton" style="clear:both; margin-top: 40px" action="#{clientSettingsMB.cleanDialog()}" value="Anuluj" oncomplete="income.hide()"  />
                            <p:commandButton styleClass="floatR wideButton" style="margin-top:40px;" action="#{clientSettingsMB.addIncome()}" ajax="false" value="Dodaj" oncomplete="income.hide()"  />
                        </div>

                    </h:form>

                </p:dialog> 

            </ui:define>
        </ui:composition>
    </body>
</html>
