<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">


    <body>

        <ui:composition template="/templates/mainTemplate.xhtml">
            <ui:define name="title"> Doradca - wiadomości </ui:define> 

            <ui:define name="content">

                  
                    <h2 class="messagesTitle">Wiadomości - skrzynka odbiorcza</h2> 
                   
                    <h:form>
                    <div class="newsletter" style="margin: 25px 0;"> 
                            <h:inputText class="label2" value="wyszukaj"/> <h:link class="greyButton buttonspace" value="OK"/> 
                     </div>
                    </h:form>
                        
                    <div class="contentBox">
                        
                        <h:form>                       
                        <ui:repeat var="o" value="#{messagesMB.messages}">   
                        <div class="messagesBox"> 

                            <div class="messagesBoxContentLeft">
                                    <h:outputText class="msgUserHeader headerColor#{o.userByFkFromUser.type}" value="#{o.userByFkFromUser.email}"/>  
                                <p>
                                    <h:outputText value="#{o.message}"/>
                                </p>


                            </div>

                            <div class="messagesBoxContentRight">
                                <h:outputText class="messagesGrayRectangle" value="#{o.sentDate}">
                                    <f:convertDateTime type="date" pattern="dd-MM-yyyy HH:mm" timeZone="GMT+2"/>
                                </h:outputText>
                                
                            </div>

                        </div>
                        </ui:repeat>
                        
                        
                        <div class="marginT50"></div>
                        
                            <h:inputTextarea class="inputWidth fontBlack"  style="resize: none; height: 70px; width: 750px" value="#{messagesMB.message}"/>
                            <p:commandLink styleClass="wideButton greenButton floatR" style="color: black;" value="Odpowiedź" type="submit" update="@(form)" ajax="true" action="#{messagesMB.sendAnswer()}"/>
                        </h:form>
                       <div class="marginT50"></div>
                    </div>

                

            </ui:define>



        </ui:composition>

    </body>
</html>
